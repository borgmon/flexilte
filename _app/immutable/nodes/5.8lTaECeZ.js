import{s as Et,e as z,c as T,a as G,d as H,b as M,i as X,Q as Se,j as V,k as J,g as k,n as it,l as Gt,p as Re,F as ge,m as q,J as zt,ae as Yt,o as ut,r as ke,t as He,f as Me,h as Ne,q as be}from"../chunks/scheduler.CouOQAXi.js";import{S as xt,i as Dt,t as ct,g as Ue,e as Oe,b as bt,c as Ot,a as Lt,m as At,d as Pt}from"../chunks/index.lC6PYala.js";import{e as qt,J as ae}from"../chunks/JsonLayout.BaJRuKon.js";import{a as ft,s as le,t as mt,b as ze,d as yt,c as Le,S as Ae,I as Pe,A as Ie}from"../chunks/editorStore.D-fetFlR.js";import{a as Be,T as Ge,A as We,C as je}from"../chunks/ButtonBox.BZJeTFJG.js";import{I as $e}from"../chunks/Icon.CeR2D0AJ.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.C6l7WIgv.js";import{c as L}from"../chunks/_commonjsHelpers.Cpj98o6Y.js";function we(a,t,e){const r=a.slice();return r[3]=t[e],r[5]=e,r}function Ee(a){let t,e,r,n,o,u;return n=new Be({props:{icon:a[3].icon,body:a[3].name,style:"variant-filled-surface text-center"}}),{c(){t=z("div"),e=z("div"),r=z("div"),Ot(n.$$.fragment),o=V(),this.h()},l(c){t=T(c,"DIV",{class:!0});var v=G(t);e=T(v,"DIV",{class:!0});var x=G(e);r=T(x,"DIV",{"data-comp":!0});var C=G(r);Lt(n.$$.fragment,C),C.forEach(H),x.forEach(H),o=J(v),v.forEach(H),this.h()},h(){M(r,"data-comp",a[3].name),M(e,"class","grid-stack-item-content"),M(t,"class","grid-stack-item w-32 cursor-grab select-none")},m(c,v){X(c,t,v),k(t,e),k(e,r),At(n,r,null),k(t,o),u=!0},p:it,i(c){u||(ct(n.$$.fragment,c),u=!0)},o(c){bt(n.$$.fragment,c),u=!1},d(c){c&&H(t),Pt(n)}}}function Fe(a){let t,e,r=qt(a[0]),n=[];for(let u=0;u<r.length;u+=1)n[u]=Ee(we(a,r,u));const o=u=>bt(n[u],1,1,()=>{n[u]=null});return{c(){t=z("div");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){t=T(u,"DIV",{id:!0,class:!0});var c=G(t);for(let v=0;v<n.length;v+=1)n[v].l(c);c.forEach(H),this.h()},h(){M(t,"id","toolbox"),M(t,"class","sidebar flex flex-wrap gap-4 overflow-auto h-32")},m(u,c){X(u,t,c);for(let v=0;v<n.length;v+=1)n[v]&&n[v].m(t,null);e=!0},p(u,[c]){if(c&1){r=qt(u[0]);let v;for(v=0;v<r.length;v+=1){const x=we(u,r,v);n[v]?(n[v].p(x,c),ct(n[v],1)):(n[v]=Ee(x),n[v].c(),ct(n[v],1),n[v].m(t,null))}for(Ue(),v=r.length;v<n.length;v+=1)o(v);Oe()}},i(u){if(!e){for(let c=0;c<r.length;c+=1)ct(n[c]);e=!0}},o(u){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)bt(n[c]);e=!1},d(u){u&&H(t),Se(n,u)}}}function Ye(a){return[[{icon:"mdi:format-text",name:"TextBox"},{icon:"mdi:image",name:"ImageBox"},{icon:"mdi:card-text",name:"CardBox"},{icon:"mdi:code",name:"CodeBlock"},{icon:"mdi:people",name:"Avatar"}]]}class Xe extends xt{constructor(t){super(),Dt(this,t,Ye,Fe,Et,{})}}var ue={},It={},$={},Ut=L&&L.__assign||function(){return Ut=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},Ut.apply(this,arguments)},qe=L&&L.__spreadArray||function(a,t,e){if(e||arguments.length===2)for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return a.concat(o||Array.prototype.slice.call(t))};Object.defineProperty($,"__esModule",{value:!0});$.Utils=$.obsoleteAttr=$.obsoleteOptsDel=$.obsoleteOpts=$.obsolete=void 0;function Ve(a,t,e,r,n){var o=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return console.warn("gridstack.js: Function `"+e+"` is deprecated in "+n+" and has been replaced with `"+r+"`. It will be **removed** in a future release"),t.apply(a,u)};return o.prototype=t.prototype,o}$.obsolete=Ve;function Je(a,t,e,r){a[t]!==void 0&&(a[e]=a[t],console.warn("gridstack.js: Option `"+t+"` is deprecated in "+r+" and has been replaced with `"+e+"`. It will be **removed** in a future release"))}$.obsoleteOpts=Je;function Ke(a,t,e,r){a[t]!==void 0&&console.warn("gridstack.js: Option `"+t+"` is deprecated in "+e+r)}$.obsoleteOptsDel=Ke;function Qe(a,t,e,r){var n=a.getAttribute(t);n!==null&&(a.setAttribute(e,n),console.warn("gridstack.js: attribute `"+t+"`="+n+" is deprecated on this object in "+r+" and has been replaced with `"+e+"`. It will be **removed** in a future release"))}$.obsoleteAttr=Qe;var Ze=function(){function a(){}return a.getElements=function(t,e){if(e===void 0&&(e=document),typeof t=="string"){var r="getElementById"in e?e:void 0;if(r&&!isNaN(+t[0])){var n=r.getElementById(t);return n?[n]:[]}var o=e.querySelectorAll(t);return!o.length&&t[0]!=="."&&t[0]!=="#"&&(o=e.querySelectorAll("."+t),o.length||(o=e.querySelectorAll("#"+t))),Array.from(o)}return[t]},a.getElement=function(t,e){if(e===void 0&&(e=document),typeof t=="string"){var r="getElementById"in e?e:void 0;if(!t.length)return null;if(r&&t[0]==="#")return r.getElementById(t.substring(1));if(t[0]==="#"||t[0]==="."||t[0]==="[")return e.querySelector(t);if(r&&!isNaN(+t[0]))return r.getElementById(t);var n=e.querySelector(t);return r&&!n&&(n=r.getElementById(t)),n||(n=e.querySelector("."+t)),n}return t},a.shouldSizeToContent=function(t,e){return e===void 0&&(e=!1),(t==null?void 0:t.grid)&&(e?t.sizeToContent===!0||t.grid.opts.sizeToContent===!0&&t.sizeToContent===void 0:!!t.sizeToContent||t.grid.opts.sizeToContent&&t.sizeToContent!==!1)},a.isIntercepted=function(t,e){return!(t.y>=e.y+e.h||t.y+t.h<=e.y||t.x+t.w<=e.x||t.x>=e.x+e.w)},a.isTouching=function(t,e){return a.isIntercepted(t,{x:e.x-.5,y:e.y-.5,w:e.w+1,h:e.h+1})},a.areaIntercept=function(t,e){var r=t.x>e.x?t.x:e.x,n=t.x+t.w<e.x+e.w?t.x+t.w:e.x+e.w;if(n<=r)return 0;var o=t.y>e.y?t.y:e.y,u=t.y+t.h<e.y+e.h?t.y+t.h:e.y+e.h;return u<=o?0:(n-r)*(u-o)},a.area=function(t){return t.w*t.h},a.sort=function(t,e){e===void 0&&(e=1);var r=1e4;return t.sort(function(n,o){var u,c,v,x,C=e*(((u=n.y)!==null&&u!==void 0?u:r)-((c=o.y)!==null&&c!==void 0?c:r));return C===0?e*(((v=n.x)!==null&&v!==void 0?v:r)-((x=o.x)!==null&&x!==void 0?x:r)):C})},a.find=function(t,e){return e?t.find(function(r){return r.id===e}):void 0},a.createStylesheet=function(t,e,r){var n=document.createElement("style"),o=r==null?void 0:r.nonce;return o&&(n.nonce=o),n.setAttribute("type","text/css"),n.setAttribute("gs-style-id",t),n.styleSheet?n.styleSheet.cssText="":n.appendChild(document.createTextNode("")),e?e.insertBefore(n,e.firstChild):(e=document.getElementsByTagName("head")[0],e.appendChild(n)),n.sheet},a.removeStylesheet=function(t,e){var r=e||document,n=r.querySelector("STYLE[gs-style-id="+t+"]");n&&n.parentNode&&n.remove()},a.addCSSRule=function(t,e,r){typeof t.addRule=="function"?t.addRule(e,r):typeof t.insertRule=="function"&&t.insertRule("".concat(e,"{").concat(r,"}"))},a.toBool=function(t){return typeof t=="boolean"?t:typeof t=="string"?(t=t.toLowerCase(),!(t===""||t==="no"||t==="false"||t==="0")):!!t},a.toNumber=function(t){return t===null||t.length===0?void 0:Number(t)},a.parseHeight=function(t){var e,r="px";if(typeof t=="string")if(t==="auto"||t==="")e=0;else{var n=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!n)throw new Error("Invalid height val = ".concat(t));r=n[2]||"px",e=parseFloat(n[1])}else e=t;return{h:e,unit:r}},a.defaults=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.forEach(function(o){for(var u in o){if(!o.hasOwnProperty(u))return;t[u]===null||t[u]===void 0?t[u]=o[u]:typeof o[u]=="object"&&typeof t[u]=="object"&&e.defaults(t[u],o[u])}}),t},a.same=function(t,e){if(typeof t!="object")return t==e;if(typeof t!=typeof e||Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0},a.copyPos=function(t,e,r){return r===void 0&&(r=!1),e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),e.w!==void 0&&(t.w=e.w),e.h!==void 0&&(t.h=e.h),r&&(e.minW&&(t.minW=e.minW),e.minH&&(t.minH=e.minH),e.maxW&&(t.maxW=e.maxW),e.maxH&&(t.maxH=e.maxH)),t},a.samePos=function(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&(t.w||1)===(e.w||1)&&(t.h||1)===(e.h||1)},a.sanitizeMinMax=function(t){t.minW||delete t.minW,t.minH||delete t.minH,t.maxW||delete t.maxW,t.maxH||delete t.maxH},a.removeInternalAndSame=function(t,e){if(!(typeof t!="object"||typeof e!="object"))for(var r in t){var n=t[r],o=e[r];r[0]==="_"||n===o?delete t[r]:n&&typeof n=="object"&&o!==void 0&&(a.removeInternalAndSame(n,o),Object.keys(n).length||delete t[r])}},a.removeInternalForSave=function(t,e){e===void 0&&(e=!0);for(var r in t)(r[0]==="_"||t[r]===null||t[r]===void 0)&&delete t[r];delete t.grid,e&&delete t.el,t.autoPosition||delete t.autoPosition,t.noResize||delete t.noResize,t.noMove||delete t.noMove,t.locked||delete t.locked,(t.w===1||t.w===t.minW)&&delete t.w,(t.h===1||t.h===t.minH)&&delete t.h},a.throttle=function(t,e){var r=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r||(r=!0,setTimeout(function(){t.apply(void 0,n),r=!1},e))}},a.removePositioningStyles=function(t){var e=t.style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")},a.getScrollElement=function(t){if(!t)return document.scrollingElement||document.documentElement;var e=getComputedStyle(t),r=/(auto|scroll)/;return r.test(e.overflow+e.overflowY)?t:this.getScrollElement(t.parentElement)},a.updateScrollPosition=function(t,e,r){var n=t.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight;if(n.top<0||n.bottom>o){var u=n.bottom-o,c=n.top,v=this.getScrollElement(t);if(v!==null){var x=v.scrollTop;n.top<0&&r<0?t.offsetHeight>o?v.scrollTop+=r:v.scrollTop+=Math.abs(c)>Math.abs(r)?r:c:r>0&&(t.offsetHeight>o?v.scrollTop+=r:v.scrollTop+=u>r?r:u),e.top+=v.scrollTop-x}}},a.updateScrollResize=function(t,e,r){var n=this.getScrollElement(e),o=n.clientHeight,u=n===this.getScrollElement()?0:n.getBoundingClientRect().top,c=t.clientY-u,v=c<r,x=c>o-r;v?n.scrollBy({behavior:"smooth",top:c-r}):x&&n.scrollBy({behavior:"smooth",top:r-(o-c)})},a.clone=function(t){return t==null||typeof t!="object"?t:t instanceof Array?qe([],t,!0):Ut({},t)},a.cloneDeep=function(t){var e=["parentGrid","el","grid","subGrid","engine"],r=a.clone(t),n=function(u){r.hasOwnProperty(u)&&typeof r[u]=="object"&&u.substring(0,2)!=="__"&&!e.find(function(c){return c===u})&&(r[u]=a.cloneDeep(t[u]))};for(var o in r)n(o);return r},a.cloneNode=function(t){var e=t.cloneNode(!0);return e.removeAttribute("id"),e},a.appendTo=function(t,e){var r;typeof e=="string"?r=a.getElement(e):r=e,r&&r.appendChild(t)},a.addElStyles=function(t,e){if(e instanceof Object){var r=function(o){e.hasOwnProperty(o)&&(Array.isArray(e[o])?e[o].forEach(function(u){t.style[o]=u}):t.style[o]=e[o])};for(var n in e)r(n)}},a.initEvent=function(t,e){var r={type:e.type},n={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:e.target?e.target:t.target};return t.dataTransfer&&(r.dataTransfer=t.dataTransfer),["altKey","ctrlKey","metaKey","shiftKey"].forEach(function(o){return r[o]=t[o]}),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(function(o){return r[o]=t[o]}),Ut(Ut({},r),n)},a.simulateMouseEvent=function(t,e,r){var n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,t.target),(r||t.target).dispatchEvent(n)},a.getValuesFromTransformedElement=function(t){var e=document.createElement("div");a.addElStyles(e,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),t.appendChild(e);var r=e.getBoundingClientRect();return t.removeChild(e),e.remove(),{xScale:1/r.width,yScale:1/r.height,xOffset:r.left,yOffset:r.top}},a.swap=function(t,e,r){var n=t[e];t[e]=t[r],t[r]=n},a}();$.Utils=Ze;var W=L&&L.__assign||function(){return W=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},W.apply(this,arguments)};Object.defineProperty(It,"__esModule",{value:!0});It.GridStackEngine=void 0;var N=$;It.GridStackEngine=function(){function a(t){t===void 0&&(t={}),this.addedNodes=[],this.removedNodes=[],this.column=t.column||12,this.maxRow=t.maxRow,this._float=t.float,this.nodes=t.nodes||[],this.onChange=t.onChange}return a.prototype.batchUpdate=function(t,e){return t===void 0&&(t=!0),e===void 0&&(e=!0),!!this.batchMode===t?this:(this.batchMode=t,t?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,e&&this._packNodes(),this._notify()),this)},a.prototype._useEntireRowArea=function(t,e){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!t._moving||t._skipDown||e.y<=t.y)},a.prototype._fixCollisions=function(t,e,r,n){if(e===void 0&&(e=t),n===void 0&&(n={}),this.sortNodes(-1),r=r||this.collide(t,e),!r)return!1;if(t._moving&&!n.nested&&!this.float&&this.swap(t,r))return!0;var o=e;this._useEntireRowArea(t,e)&&(o={x:0,w:this.column,y:e.y,h:e.h},r=this.collide(t,o,n.skip));for(var u=!1,c={nested:!0,pack:!1};r=r||this.collide(t,o,n.skip);){var v=void 0;if(r.locked||t._moving&&!t._skipDown&&e.y>t.y&&!this.float&&(!this.collide(r,W(W({},r),{y:t.y}),t)||!this.collide(r,W(W({},r),{y:e.y-r.h}),t))?(t._skipDown=t._skipDown||e.y>t.y,v=this.moveNode(t,W(W(W({},e),{y:r.y+r.h}),c)),r.locked&&v?N.Utils.copyPos(e,t):!r.locked&&v&&n.pack&&(this._packNodes(),e.y=r.y+r.h,N.Utils.copyPos(t,e)),u=u||v):v=this.moveNode(r,W(W(W({},r),{y:e.y+e.h,skip:t}),c)),!v)return u;r=void 0}return u},a.prototype.collide=function(t,e,r){e===void 0&&(e=t);var n=t._id,o=r==null?void 0:r._id;return this.nodes.find(function(u){return u._id!==n&&u._id!==o&&N.Utils.isIntercepted(u,e)})},a.prototype.collideAll=function(t,e,r){e===void 0&&(e=t);var n=t._id,o=r==null?void 0:r._id;return this.nodes.filter(function(u){return u._id!==n&&u._id!==o&&N.Utils.isIntercepted(u,e)})},a.prototype.directionCollideCoverage=function(t,e,r){if(!(!e.rect||!t._rect)){var n=t._rect,o=W({},e.rect);o.y>n.y?(o.h+=o.y-n.y,o.y=n.y):o.h+=n.y-o.y,o.x>n.x?(o.w+=o.x-n.x,o.x=n.x):o.w+=n.x-o.x;for(var u,c=.5,v=0,x=r;v<x.length;v++){var C=x[v];if(C.locked||!C._rect)break;var w=C._rect,h=Number.MAX_VALUE,i=Number.MAX_VALUE;n.y<w.y?h=(o.y+o.h-w.y)/w.h:n.y+n.h>w.y+w.h&&(h=(w.y+w.h-o.y)/w.h),n.x<w.x?i=(o.x+o.w-w.x)/w.w:n.x+n.w>w.x+w.w&&(i=(w.x+w.w-o.x)/w.w);var s=Math.min(i,h);s>c&&(c=s,u=C)}return e.collide=u,u}},a.prototype.cacheRects=function(t,e,r,n,o,u){return this.nodes.forEach(function(c){return c._rect={y:c.y*e+r,x:c.x*t+u,w:c.w*t-u-n,h:c.h*e-r-o}}),this},a.prototype.swap=function(t,e){if(!e||e.locked||!t||t.locked)return!1;function r(){var u=e.x,c=e.y;return e.x=t.x,e.y=t.y,t.h!=e.h?(t.x=u,t.y=e.y+e.h):t.w!=e.w?(t.x=e.x+e.w,t.y=c):(t.x=u,t.y=c),t._dirty=e._dirty=!0,!0}var n;if(t.w===e.w&&t.h===e.h&&(t.x===e.x||t.y===e.y)&&(n=N.Utils.isTouching(t,e)))return r();if(n!==!1){if(t.w===e.w&&t.x===e.x&&(n||(n=N.Utils.isTouching(t,e)))){if(e.y<t.y){var o=t;t=e,e=o}return r()}if(n!==!1){if(t.h===e.h&&t.y===e.y&&(n||(n=N.Utils.isTouching(t,e)))){if(e.x<t.x){var o=t;t=e,e=o}return r()}return!1}}},a.prototype.isAreaEmpty=function(t,e,r,n){var o={x:t||0,y:e||0,w:r||1,h:n||1};return!this.collide(o)},a.prototype.compact=function(t,e){var r=this;if(t===void 0&&(t="compact"),e===void 0&&(e=!0),this.nodes.length===0)return this;e&&this.sortNodes();var n=this.batchMode;n||this.batchUpdate();var o=this._inColumnResize;o||(this._inColumnResize=!0);var u=this.nodes;return this.nodes=[],u.forEach(function(c,v,x){var C;c.locked||(c.autoPosition=!0,t==="list"&&v&&(C=x[v-1])),r.addNode(c,!1,C)}),o||delete this._inColumnResize,n||this.batchUpdate(!1),this},Object.defineProperty(a.prototype,"float",{get:function(){return this._float||!1},set:function(t){this._float!==t&&(this._float=t||!1,t||this._packNodes()._notify())},enumerable:!1,configurable:!0}),a.prototype.sortNodes=function(t){return t===void 0&&(t=1),this.nodes=N.Utils.sort(this.nodes,t),this},a.prototype._packNodes=function(){var t=this;return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(function(e){if(!(e._updating||e._orig===void 0||e.y===e._orig.y))for(var r=e.y;r>e._orig.y;){--r;var n=t.collide(e,{x:e.x,y:r,w:e.w,h:e.h});n||(e._dirty=!0,e.y=r)}}):this.nodes.forEach(function(e,r){if(!e.locked)for(;e.y>0;){var n=r===0?0:e.y-1,o=r===0||!t.collide(e,{x:e.x,y:n,w:e.w,h:e.h});if(!o)break;e._dirty=e.y!==n,e.y=n}}),this)},a.prototype.prepareNode=function(t,e){var r;t._id=(r=t._id)!==null&&r!==void 0?r:a._idSeq++,(t.x===void 0||t.y===void 0||t.x===null||t.y===null)&&(t.autoPosition=!0);var n={x:0,y:0,w:1,h:1};return N.Utils.defaults(t,n),t.autoPosition||delete t.autoPosition,t.noResize||delete t.noResize,t.noMove||delete t.noMove,N.Utils.sanitizeMinMax(t),typeof t.x=="string"&&(t.x=Number(t.x)),typeof t.y=="string"&&(t.y=Number(t.y)),typeof t.w=="string"&&(t.w=Number(t.w)),typeof t.h=="string"&&(t.h=Number(t.h)),isNaN(t.x)&&(t.x=n.x,t.autoPosition=!0),isNaN(t.y)&&(t.y=n.y,t.autoPosition=!0),isNaN(t.w)&&(t.w=n.w),isNaN(t.h)&&(t.h=n.h),this.nodeBoundFix(t,e),t},a.prototype.nodeBoundFix=function(t,e){var r=t._orig||N.Utils.copyPos({},t);t.maxW&&(t.w=Math.min(t.w,t.maxW)),t.maxH&&(t.h=Math.min(t.h,t.maxH)),t.minW&&t.minW<=this.column&&(t.w=Math.max(t.w,t.minW)),t.minH&&(t.h=Math.max(t.h,t.minH));var n=(t.x||0)+(t.w||1)>this.column;if(n&&this.column<12&&!this._inColumnResize&&t._id&&this.findCacheLayout(t,12)===-1){var o=W({},t);o.autoPosition||o.x===void 0?(delete o.x,delete o.y):o.x=Math.min(11,o.x),o.w=Math.min(12,o.w||1),this.cacheOneLayout(o,12)}return t.w>this.column?t.w=this.column:t.w<1&&(t.w=1),this.maxRow&&t.h>this.maxRow?t.h=this.maxRow:t.h<1&&(t.h=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.w>this.column&&(e?t.w=this.column-t.x:t.x=this.column-t.w),this.maxRow&&t.y+t.h>this.maxRow&&(e?t.h=this.maxRow-t.y:t.y=this.maxRow-t.h),N.Utils.samePos(t,r)||(t._dirty=!0),this},a.prototype.getDirtyNodes=function(t){return t?this.nodes.filter(function(e){return e._dirty&&!N.Utils.samePos(e,e._orig)}):this.nodes.filter(function(e){return e._dirty})},a.prototype._notify=function(t){if(this.batchMode||!this.onChange)return this;var e=(t||[]).concat(this.getDirtyNodes());return this.onChange(e),this},a.prototype.cleanNodes=function(){return this.batchMode?this:(this.nodes.forEach(function(t){delete t._dirty,delete t._lastTried}),this)},a.prototype.saveInitial=function(){return this.nodes.forEach(function(t){t._orig=N.Utils.copyPos({},t),delete t._dirty}),this._hasLocked=this.nodes.some(function(t){return t.locked}),this},a.prototype.restoreInitial=function(){return this.nodes.forEach(function(t){N.Utils.samePos(t,t._orig)||(N.Utils.copyPos(t,t._orig),t._dirty=!0)}),this._notify(),this},a.prototype.findEmptyPosition=function(t,e,r,n){e===void 0&&(e=this.nodes),r===void 0&&(r=this.column);for(var o=n?n.y*r+(n.x+n.w):0,u=!1,c=function(x){var C=x%r,w=Math.floor(x/r);if(C+t.w>r)return"continue";var h={x:C,y:w,w:t.w,h:t.h};e.find(function(i){return N.Utils.isIntercepted(h,i)})||((t.x!==C||t.y!==w)&&(t._dirty=!0),t.x=C,t.y=w,delete t.autoPosition,u=!0)},v=o;!u;++v)c(v);return u},a.prototype.addNode=function(t,e,r){e===void 0&&(e=!1);var n=this.nodes.find(function(u){return u._id===t._id});if(n)return n;this._inColumnResize?this.nodeBoundFix(t):this.prepareNode(t),delete t._temporaryRemoved,delete t._removeDOM;var o;return t.autoPosition&&this.findEmptyPosition(t,this.nodes,this.column,r)&&(delete t.autoPosition,o=!0),this.nodes.push(t),e&&this.addedNodes.push(t),o||this._fixCollisions(t),this.batchMode||this._packNodes()._notify(),t},a.prototype.removeNode=function(t,e,r){return e===void 0&&(e=!0),r===void 0&&(r=!1),this.nodes.find(function(n){return n._id===t._id})?(r&&this.removedNodes.push(t),e&&(t._removeDOM=!0),this.nodes=this.nodes.filter(function(n){return n._id!==t._id}),t._isAboutToRemove||this._packNodes(),this._notify([t]),this):this},a.prototype.removeAll=function(t,e){if(t===void 0&&(t=!0),e===void 0&&(e=!0),delete this._layouts,!this.nodes.length)return this;t&&this.nodes.forEach(function(n){return n._removeDOM=!0});var r=this.nodes;return this.removedNodes=e?r:[],this.nodes=[],this._notify(r)},a.prototype.moveNodeCheck=function(t,e){var r=this;if(!this.changedPosConstrain(t,e))return!1;if(e.pack=!0,!this.maxRow)return this.moveNode(t,e);var n,o=new a({column:this.column,float:this.float,nodes:this.nodes.map(function(v){return v._id===t._id?(n=W({},v),n):W({},v)})});if(!n)return!1;var u=o.moveNode(n,e)&&o.getRow()<=Math.max(this.getRow(),this.maxRow);if(!u&&!e.resizing&&e.collide){var c=e.collide.el.gridstackNode;if(this.swap(t,c))return this._notify(),!0}return u?(o.nodes.filter(function(v){return v._dirty}).forEach(function(v){var x=r.nodes.find(function(C){return C._id===v._id});x&&(N.Utils.copyPos(x,v),x._dirty=!0)}),this._notify(),!0):!1},a.prototype.willItFit=function(t){if(delete t._willFitPos,!this.maxRow)return!0;var e=new a({column:this.column,float:this.float,nodes:this.nodes.map(function(n){return W({},n)})}),r=W({},t);return this.cleanupNode(r),delete r.el,delete r._id,delete r.content,delete r.grid,e.addNode(r),e.getRow()<=this.maxRow?(t._willFitPos=N.Utils.copyPos({},r),!0):!1},a.prototype.changedPosConstrain=function(t,e){return e.w=e.w||t.w,e.h=e.h||t.h,t.x!==e.x||t.y!==e.y?!0:(t.maxW&&(e.w=Math.min(e.w,t.maxW)),t.maxH&&(e.h=Math.min(e.h,t.maxH)),t.minW&&(e.w=Math.max(e.w,t.minW)),t.minH&&(e.h=Math.max(e.h,t.minH)),t.w!==e.w||t.h!==e.h)},a.prototype.moveNode=function(t,e){var r,n;if(!t||!e)return!1;var o;e.pack===void 0&&!this.batchMode&&(o=e.pack=!0),typeof e.x!="number"&&(e.x=t.x),typeof e.y!="number"&&(e.y=t.y),typeof e.w!="number"&&(e.w=t.w),typeof e.h!="number"&&(e.h=t.h);var u=t.w!==e.w||t.h!==e.h,c=N.Utils.copyPos({},t,!0);if(N.Utils.copyPos(c,e),this.nodeBoundFix(c,u),N.Utils.copyPos(e,c),!e.forceCollide&&N.Utils.samePos(t,e))return!1;var v=N.Utils.copyPos({},t),x=this.collideAll(t,c,e.skip),C=!0;if(x.length){var w=t._moving&&!e.nested,h=w?this.directionCollideCoverage(t,e,x):x[0];if(w&&h&&(!((n=(r=t.grid)===null||r===void 0?void 0:r.opts)===null||n===void 0)&&n.subGridDynamic)&&!t.grid._isTemp){var i=N.Utils.areaIntercept(e.rect,h._rect),s=N.Utils.area(e.rect),l=N.Utils.area(h._rect),d=i/(s<l?s:l);d>.8&&(h.grid.makeSubGrid(h.el,void 0,t),h=void 0)}h?C=!this._fixCollisions(t,c,h,e):(C=!1,o&&delete e.pack)}return C&&(t._dirty=!0,N.Utils.copyPos(t,c)),e.pack&&this._packNodes()._notify(),!N.Utils.samePos(t,v)},a.prototype.getRow=function(){return this.nodes.reduce(function(t,e){return Math.max(t,e.y+e.h)},0)},a.prototype.beginUpdate=function(t){return t._updating||(t._updating=!0,delete t._skipDown,this.batchMode||this.saveInitial()),this},a.prototype.endUpdate=function(){var t=this.nodes.find(function(e){return e._updating});return t&&(delete t._updating,delete t._skipDown),this},a.prototype.save=function(t,e){var r;t===void 0&&(t=!0);var n=(r=this._layouts)===null||r===void 0?void 0:r.length,o=n&&this.column!==n-1?this._layouts[n-1]:null,u=[];return this.sortNodes(),this.nodes.forEach(function(c){var v=o==null?void 0:o.find(function(C){return C._id===c._id}),x=W(W({},c),v||{});N.Utils.removeInternalForSave(x,!t),e&&e(c,x),u.push(x)}),u},a.prototype.layoutsNodesChange=function(t){var e=this;return!this._layouts||this._inColumnResize?this:(this._layouts.forEach(function(r,n){if(!r||n===e.column)return e;if(n<e.column)e._layouts[n]=void 0;else{var o=n/e.column;t.forEach(function(u){if(u._orig){var c=r.find(function(v){return v._id===u._id});c&&(c.y>=0&&u.y!==u._orig.y&&(c.y+=u.y-u._orig.y),u.x!==u._orig.x&&(c.x=Math.round(u.x*o)),u.w!==u._orig.w&&(c.w=Math.round(u.w*o)))}})}}),this)},a.prototype.columnChanged=function(t,e,r){var n=this,o;if(r===void 0&&(r="moveScale"),!this.nodes.length||!e||t===e)return this;if(r==="none")return this;var u=r==="compact"||r==="list";u&&this.sortNodes(1),e<t&&this.cacheLayout(this.nodes,t),this.batchUpdate();var c=[],v=u?this.nodes:N.Utils.sort(this.nodes,-1);if(e>t&&this._layouts){var x=this._layouts[e]||[],C=this._layouts.length-1;!x.length&&t!==C&&(!((o=this._layouts[C])===null||o===void 0)&&o.length)&&(t=C,this._layouts[C].forEach(function(s){var l,d,p,f=v.find(function(m){return m._id===s._id});f&&(!u&&!s.autoPosition&&(f.x=(l=s.x)!==null&&l!==void 0?l:f.x,f.y=(d=s.y)!==null&&d!==void 0?d:f.y),f.w=(p=s.w)!==null&&p!==void 0?p:f.w,(s.x==null||s.y===void 0)&&(f.autoPosition=!0))})),x.forEach(function(s){var l,d,p,f=v.findIndex(function(g){return g._id===s._id});if(f!==-1){var m=v[f];if(u){m.w=s.w;return}(s.autoPosition||isNaN(s.x)||isNaN(s.y))&&n.findEmptyPosition(s,c),s.autoPosition||(m.x=(l=s.x)!==null&&l!==void 0?l:m.x,m.y=(d=s.y)!==null&&d!==void 0?d:m.y,m.w=(p=s.w)!==null&&p!==void 0?p:m.w,c.push(m)),v.splice(f,1)}})}if(u)this.compact(r,!1);else{if(v.length)if(typeof r=="function")r(e,t,c,v);else{var w=u?1:e/t,h=r==="move"||r==="moveScale",i=r==="scale"||r==="moveScale";v.forEach(function(s){s.x=e===1?0:h?Math.round(s.x*w):Math.min(s.x,e-1),s.w=e===1||t===1?1:i?Math.round(s.w*w)||1:Math.min(s.w,e),c.push(s)}),v=[]}c=N.Utils.sort(c,-1),this._inColumnResize=!0,this.nodes=[],c.forEach(function(s){n.addNode(s,!1),delete s._orig})}return this.nodes.forEach(function(s){return delete s._orig}),this.batchUpdate(!1,!u),delete this._inColumnResize,this},a.prototype.cacheLayout=function(t,e,r){var n=this;r===void 0&&(r=!1);var o=[];return t.forEach(function(u,c){var v;if(u._id===void 0){var x=u.id?n.nodes.find(function(C){return C.id===u.id}):void 0;u._id=(v=x==null?void 0:x._id)!==null&&v!==void 0?v:a._idSeq++}o[c]={x:u.x,y:u.y,w:u.w,_id:u._id}}),this._layouts=r?[]:this._layouts||[],this._layouts[e]=o,this},a.prototype.cacheOneLayout=function(t,e){var r;t._id=(r=t._id)!==null&&r!==void 0?r:a._idSeq++;var n={x:t.x,y:t.y,w:t.w,_id:t._id};(t.autoPosition||t.x===void 0)&&(delete n.x,delete n.y,t.autoPosition&&(n.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[e]=this._layouts[e]||[];var o=this.findCacheLayout(t,e);return o===-1?this._layouts[e].push(n):this._layouts[e][o]=n,this},a.prototype.findCacheLayout=function(t,e){var r,n,o;return(o=(n=(r=this._layouts)===null||r===void 0?void 0:r[e])===null||n===void 0?void 0:n.findIndex(function(u){return u._id===t._id}))!==null&&o!==void 0?o:-1},a.prototype.removeNodeFromLayoutCache=function(t){if(this._layouts)for(var e=0;e<this._layouts.length;e++){var r=this.findCacheLayout(t,e);r!==-1&&this._layouts[e].splice(r,1)}},a.prototype.cleanupNode=function(t){for(var e in t)e[0]==="_"&&e!=="_id"&&delete t[e];return this},a._idSeq=0,a}();var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.dragInDefaultOptions=wt.gridDefaults=void 0;wt.gridDefaults={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"};wt.dragInDefaultOptions={handle:".grid-stack-item-content",appendTo:"body"};var Bt={},dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.DDManager=void 0;var ti=function(){function a(){}return a}();dt.DDManager=ti;var Jt={},Kt={},Qt={},j={};Object.defineProperty(j,"__esModule",{value:!0});j.pointerleave=j.pointerenter=j.pointerdown=j.touchend=j.touchmove=j.touchstart=j.isTouch=void 0;var ve=dt;j.isTouch=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);var ot=function(){function a(){}return a}();function Vt(a,t){if(!(a.touches.length>1)){a.cancelable&&a.preventDefault();var e=a.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(r)}}function Te(a,t){a.cancelable&&a.preventDefault();var e=document.createEvent("MouseEvents");e.initMouseEvent(t,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(e)}function ei(a){ot.touchHandled||(ot.touchHandled=!0,Vt(a,"mousedown"))}j.touchstart=ei;function ii(a){ot.touchHandled&&Vt(a,"mousemove")}j.touchmove=ii;function ri(a){if(ot.touchHandled){ot.pointerLeaveTimeout&&(window.clearTimeout(ot.pointerLeaveTimeout),delete ot.pointerLeaveTimeout);var t=!!ve.DDManager.dragElement;Vt(a,"mouseup"),t||Vt(a,"click"),ot.touchHandled=!1}}j.touchend=ri;function ni(a){a.pointerType!=="mouse"&&a.target.releasePointerCapture(a.pointerId)}j.pointerdown=ni;function si(a){ve.DDManager.dragElement&&a.pointerType!=="mouse"&&Te(a,"mouseenter")}j.pointerenter=si;function oi(a){ve.DDManager.dragElement&&a.pointerType!=="mouse"&&(ot.pointerLeaveTimeout=window.setTimeout(function(){delete ot.pointerLeaveTimeout,Te(a,"mouseleave")},10))}j.pointerleave=oi;Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DDResizableHandle=void 0;var tt=j;Qt.DDResizableHandle=function(){function a(t,e,r){this.host=t,this.dir=e,this.option=r,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this._init()}return a.prototype._init=function(){var t=this.el=document.createElement("div");return t.classList.add("ui-resizable-handle"),t.classList.add("".concat(a.prefix).concat(this.dir)),t.style.zIndex="100",t.style.userSelect="none",this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),tt.isTouch&&(this.el.addEventListener("touchstart",tt.touchstart),this.el.addEventListener("pointerdown",tt.pointerdown)),this},a.prototype.destroy=function(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),tt.isTouch&&(this.el.removeEventListener("touchstart",tt.touchstart),this.el.removeEventListener("pointerdown",tt.pointerdown)),this.host.removeChild(this.el),delete this.el,delete this.host,this},a.prototype._mouseDown=function(t){this.mouseDownEvent=t,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),tt.isTouch&&(this.el.addEventListener("touchmove",tt.touchmove),this.el.addEventListener("touchend",tt.touchend)),t.stopPropagation(),t.preventDefault()},a.prototype._mouseMove=function(t){var e=this.mouseDownEvent;this.moving?this._triggerEvent("move",t):Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",t),document.addEventListener("keydown",this._keyEvent)),t.stopPropagation()},a.prototype._mouseUp=function(t){this.moving&&(this._triggerEvent("stop",t),document.removeEventListener("keydown",this._keyEvent)),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),tt.isTouch&&(this.el.removeEventListener("touchmove",tt.touchmove),this.el.removeEventListener("touchend",tt.touchend)),delete this.moving,delete this.mouseDownEvent,t.stopPropagation(),t.preventDefault()},a.prototype._keyEvent=function(t){var e,r;t.key==="Escape"&&((r=(e=this.host.gridstackNode)===null||e===void 0?void 0:e.grid)===null||r===void 0||r.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent))},a.prototype._triggerEvent=function(t,e){return this.option[t]&&this.option[t](e),this},a.prefix="ui-resizable-",a}();var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.DDBaseImplement=void 0;var ai=function(){function a(){this._eventRegister={}}return Object.defineProperty(a.prototype,"disabled",{get:function(){return this._disabled},enumerable:!1,configurable:!0}),a.prototype.on=function(t,e){this._eventRegister[t]=e},a.prototype.off=function(t){delete this._eventRegister[t]},a.prototype.enable=function(){this._disabled=!1},a.prototype.disable=function(){this._disabled=!0},a.prototype.destroy=function(){delete this._eventRegister},a.prototype.triggerEvent=function(t,e){if(!this.disabled&&this._eventRegister&&this._eventRegister[t])return this._eventRegister[t](e)},a}();Ht.DDBaseImplement=ai;var li=L&&L.__extends||function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},a(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.DDResizable=void 0;var ui=Qt,di=Ht,Tt=$,gt=dt;Kt.DDResizable=function(a){li(t,a);function t(e,r){r===void 0&&(r={});var n=a.call(this)||this;return n.el=e,n.option=r,n.rectScale={x:1,y:1},n._ui=function(){var o=n.el.parentElement,u=o.getBoundingClientRect(),c={width:n.originalRect.width,height:n.originalRect.height+n.scrolled,left:n.originalRect.left,top:n.originalRect.top-n.scrolled},v=n.temporalRect||c;return{position:{left:(v.left-u.left)*n.rectScale.x,top:(v.top-u.top)*n.rectScale.y},size:{width:v.width*n.rectScale.x,height:v.height*n.rectScale.y}}},n._mouseOver=n._mouseOver.bind(n),n._mouseOut=n._mouseOut.bind(n),n.enable(),n._setupAutoHide(n.option.autoHide),n._setupHandlers(),n}return t.prototype.on=function(e,r){a.prototype.on.call(this,e,r)},t.prototype.off=function(e){a.prototype.off.call(this,e)},t.prototype.enable=function(){a.prototype.enable.call(this),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)},t.prototype.disable=function(){a.prototype.disable.call(this),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)},t.prototype.destroy=function(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,a.prototype.destroy.call(this)},t.prototype.updateOption=function(e){var r=this,n=e.handles&&e.handles!==this.option.handles,o=e.autoHide&&e.autoHide!==this.option.autoHide;return Object.keys(e).forEach(function(u){return r.option[u]=e[u]}),n&&(this._removeHandlers(),this._setupHandlers()),o&&this._setupAutoHide(this.option.autoHide),this},t.prototype._setupAutoHide=function(e){return e?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),gt.DDManager.overResizeElement===this&&delete gt.DDManager.overResizeElement),this},t.prototype._mouseOver=function(e){gt.DDManager.overResizeElement||gt.DDManager.dragElement||(gt.DDManager.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))},t.prototype._mouseOut=function(e){gt.DDManager.overResizeElement===this&&(delete gt.DDManager.overResizeElement,this.el.classList.add("ui-resizable-autohide"))},t.prototype._setupHandlers=function(){var e=this;return this.handlers=this.option.handles.split(",").map(function(r){return r.trim()}).map(function(r){return new ui.DDResizableHandle(e.el,r,{start:function(n){e._resizeStart(n)},stop:function(n){e._resizeStop(n)},move:function(n){e._resizing(n,r)}})}),this},t.prototype._resizeStart=function(e){this.sizeToContent=Tt.Utils.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=Tt.Utils.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=e,this._setupHelper(),this._applyChange();var r=Tt.Utils.initEvent(e,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(r,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",r),this},t.prototype._resizing=function(e,r){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(e,r),this._applyChange();var n=Tt.Utils.initEvent(e,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(n,this._ui()),this.triggerEvent("resize",n),this},t.prototype._resizeStop=function(e){var r=Tt.Utils.initEvent(e,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(r),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",r),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this},t.prototype._setupHelper=function(){var e=this;this.elOriginStyleVal=t._originStyleProp.map(function(o){return e.el.style[o]}),this.parentOriginStylePosition=this.el.parentElement.style.position;var r=this.el.parentElement,n=Tt.Utils.getValuesFromTransformedElement(r);return this.rectScale={x:n.xScale,y:n.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this},t.prototype._cleanHelper=function(){var e=this;return t._originStyleProp.forEach(function(r,n){e.el.style[r]=e.elOriginStyleVal[n]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this},t.prototype._getChange=function(e,r){var n=this.startEvent,o={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},u=e.clientX-n.clientX,c=this.sizeToContent?0:e.clientY-n.clientY;r.indexOf("e")>-1?o.width+=u:r.indexOf("w")>-1&&(o.width-=u,o.left+=u),r.indexOf("s")>-1?o.height+=c:r.indexOf("n")>-1&&(o.height-=c,o.top+=c);var v=this._constrainSize(o.width,o.height);return Math.round(o.width)!==Math.round(v.width)&&(r.indexOf("w")>-1&&(o.left+=o.width-v.width),o.width=v.width),Math.round(o.height)!==Math.round(v.height)&&(r.indexOf("n")>-1&&(o.top+=o.height-v.height),o.height=v.height),o},t.prototype._constrainSize=function(e,r){var n=this.option.maxWidth||Number.MAX_SAFE_INTEGER,o=this.option.minWidth/this.rectScale.x||e,u=this.option.maxHeight||Number.MAX_SAFE_INTEGER,c=this.option.minHeight/this.rectScale.y||r,v=Math.min(n,Math.max(o,e)),x=Math.min(u,Math.max(c,r));return{width:v,height:x}},t.prototype._applyChange=function(){var e,r=this,n={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){var o=this.el.parentElement,u=(e=o.getBoundingClientRect(),e.left),c=e.top;n={left:u,top:c,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(function(v){var x=r.temporalRect[v],C=v==="width"||v==="left"?r.rectScale.x:v==="height"||v==="top"?r.rectScale.y:1;r.el.style[v]=(x-n[v])*C+"px"}),this):this},t.prototype._removeHandlers=function(){return this.handlers.forEach(function(e){return e.destroy()}),delete this.handlers,this},t._originStyleProp=["width","height","position","left","top","opacity","zIndex"],t}(di.DDBaseImplement);var Zt={},hi=L&&L.__extends||function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},a(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),de=L&&L.__assign||function(){return de=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},de.apply(this,arguments)};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DDDraggable=void 0;var Y=dt,vt=$,fi=Ht,et=j,ci='input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle';Zt.DDDraggable=function(a){hi(t,a);function t(e,r){r===void 0&&(r={});var n=a.call(this)||this;n.el=e,n.option=r,n.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};var o=r.handle.substring(1);return n.dragEl=e.classList.contains(o)?e:e.querySelector(r.handle)||e,n._mouseDown=n._mouseDown.bind(n),n._mouseMove=n._mouseMove.bind(n),n._mouseUp=n._mouseUp.bind(n),n._keyEvent=n._keyEvent.bind(n),n.enable(),n}return t.prototype.on=function(e,r){a.prototype.on.call(this,e,r)},t.prototype.off=function(e){a.prototype.off.call(this,e)},t.prototype.enable=function(){this.disabled!==!1&&(a.prototype.enable.call(this),this.dragEl.addEventListener("mousedown",this._mouseDown),et.isTouch&&(this.dragEl.addEventListener("touchstart",et.touchstart),this.dragEl.addEventListener("pointerdown",et.pointerdown)),this.el.classList.remove("ui-draggable-disabled"))},t.prototype.disable=function(e){e===void 0&&(e=!1),this.disabled!==!0&&(a.prototype.disable.call(this),this.dragEl.removeEventListener("mousedown",this._mouseDown),et.isTouch&&(this.dragEl.removeEventListener("touchstart",et.touchstart),this.dragEl.removeEventListener("pointerdown",et.pointerdown)),e||this.el.classList.add("ui-draggable-disabled"))},t.prototype.destroy=function(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,a.prototype.destroy.call(this)},t.prototype.updateOption=function(e){var r=this;return Object.keys(e).forEach(function(n){return r.option[n]=e[n]}),this},t.prototype._mouseDown=function(e){if(!Y.DDManager.mouseHandled)return e.button!==0||e.target!==this.dragEl&&e.target.closest(ci)||this.option.cancel&&e.target.closest(this.option.cancel)||(this.mouseDownEvent=e,delete this.dragging,delete Y.DDManager.dragElement,delete Y.DDManager.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),et.isTouch&&(this.dragEl.addEventListener("touchmove",et.touchmove),this.dragEl.addEventListener("touchend",et.touchend)),e.preventDefault(),document.activeElement&&document.activeElement.blur(),Y.DDManager.mouseHandled=!0),!0},t.prototype._callDrag=function(e){if(this.dragging){var r=vt.Utils.initEvent(e,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(r,this.ui()),this.triggerEvent("drag",r)}},t.prototype._mouseMove=function(e){var r=this,n,o=this.mouseDownEvent;if(this.lastDrag=e,this.dragging)if(this._dragFollow(e),Y.DDManager.pauseDrag){var u=Number.isInteger(Y.DDManager.pauseDrag)?Y.DDManager.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(function(){return r._callDrag(e)},u)}else this._callDrag(e);else if(Math.abs(e.x-o.x)+Math.abs(e.y-o.y)>3){this.dragging=!0,Y.DDManager.dragElement=this;var c=(n=this.el.gridstackNode)===null||n===void 0?void 0:n.grid;c?Y.DDManager.dropElement=c.el.ddElement.ddDroppable:delete Y.DDManager.dropElement,this.helper=this._createHelper(e),this._setupHelperContainmentStyle(),this.dragTransform=vt.Utils.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(e,this.el,this.helperContainment),this._setupHelperStyle(e);var v=vt.Utils.initEvent(e,{target:this.el,type:"dragstart"});this.option.start&&this.option.start(v,this.ui()),this.triggerEvent("dragstart",v),document.addEventListener("keydown",this._keyEvent)}return!0},t.prototype._mouseUp=function(e){var r,n;if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),et.isTouch&&(this.dragEl.removeEventListener("touchmove",et.touchmove,!0),this.dragEl.removeEventListener("touchend",et.touchend,!0)),this.dragging){delete this.dragging,(r=this.el.gridstackNode)===null||r===void 0||delete r._origRotate,document.removeEventListener("keydown",this._keyEvent),((n=Y.DDManager.dropElement)===null||n===void 0?void 0:n.el)===this.el.parentElement&&delete Y.DDManager.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();var o=vt.Utils.initEvent(e,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(o),this.triggerEvent("dragstop",o),Y.DDManager.dropElement&&Y.DDManager.dropElement.drop(e)}delete this.helper,delete this.mouseDownEvent,delete Y.DDManager.dragElement,delete Y.DDManager.dropElement,delete Y.DDManager.mouseHandled,e.preventDefault()},t.prototype._keyEvent=function(e){var r=this.el.gridstackNode;if(r){var n=r.grid;if(e.key==="Escape")r._origRotate&&(r._orig=r._origRotate,delete r._origRotate),n.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent);else if(e.key==="r"||e.key==="R"){if(r.w===r.h)return;r._origRotate=r._origRotate||de({},r._orig),delete r._moving,n.setAnimation(!1).rotate(r.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation(),r._moving=!0,this.dragOffset=this._getDragOffset(this.lastDrag,r.el,this.helperContainment),this.helper.style.width=this.dragOffset.width+"px",this.helper.style.height=this.dragOffset.height+"px",vt.Utils.swap(r._orig,"w","h"),delete r._rect,this._mouseMove(this.lastDrag)}}},t.prototype._createHelper=function(e){var r=this,n=this.el;return typeof this.option.helper=="function"?n=this.option.helper(e):this.option.helper==="clone"&&(n=vt.Utils.cloneNode(this.el)),document.body.contains(n)||vt.Utils.appendTo(n,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),n===this.el&&(this.dragElementOriginStyle=t.originStyleProp.map(function(o){return r.el.style[o]})),n},t.prototype._setupHelperStyle=function(e){var r=this;this.helper.classList.add("ui-draggable-dragging");var n=this.helper.style;return n.pointerEvents="none",n.width=this.dragOffset.width+"px",n.height=this.dragOffset.height+"px",n.willChange="left, top",n.position="fixed",this._dragFollow(e),n.transition="none",setTimeout(function(){r.helper&&(n.transition=null)},0),this},t.prototype._removeHelperStyle=function(){var e=this,r;this.helper.classList.remove("ui-draggable-dragging");var n=(r=this.helper)===null||r===void 0?void 0:r.gridstackNode;if(!(n!=null&&n._isAboutToRemove)&&this.dragElementOriginStyle){var o=this.helper,u=this.dragElementOriginStyle.transition||null;o.style.transition=this.dragElementOriginStyle.transition="none",t.originStyleProp.forEach(function(c){return o.style[c]=e.dragElementOriginStyle[c]||null}),setTimeout(function(){return o.style.transition=u},50)}return delete this.dragElementOriginStyle,this},t.prototype._dragFollow=function(e){var r={left:0,top:0},n=this.helper.style,o=this.dragOffset;n.left=(e.clientX+o.offsetLeft-r.left)*this.dragTransform.xScale+"px",n.top=(e.clientY+o.offsetTop-r.top)*this.dragTransform.yScale+"px"},t.prototype._setupHelperContainmentStyle=function(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this},t.prototype._getDragOffset=function(e,r,n){var o=0,u=0;n&&(o=this.dragTransform.xOffset,u=this.dragTransform.yOffset);var c=r.getBoundingClientRect();return{left:c.left,top:c.top,offsetLeft:-e.clientX+c.left-o,offsetTop:-e.clientY+c.top-u,width:c.width*this.dragTransform.xScale,height:c.height*this.dragTransform.yScale}},t.prototype.ui=function(){var e=this.el.parentElement,r=e.getBoundingClientRect(),n=this.helper.getBoundingClientRect();return{position:{top:(n.top-r.top)*this.dragTransform.yScale,left:(n.left-r.left)*this.dragTransform.xScale}}},t.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"],t}(fi.DDBaseImplement);var te={},pi=L&&L.__extends||function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},a(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),he=L&&L.__assign||function(){return he=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},he.apply(this,arguments)};Object.defineProperty(te,"__esModule",{value:!0});te.DDDroppable=void 0;var K=dt,gi=Ht,oe=$,kt=j,vi=function(a){pi(t,a);function t(e,r){r===void 0&&(r={});var n=a.call(this)||this;return n.el=e,n.option=r,n._mouseEnter=n._mouseEnter.bind(n),n._mouseLeave=n._mouseLeave.bind(n),n.enable(),n._setupAccept(),n}return t.prototype.on=function(e,r){a.prototype.on.call(this,e,r)},t.prototype.off=function(e){a.prototype.off.call(this,e)},t.prototype.enable=function(){this.disabled!==!1&&(a.prototype.enable.call(this),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),kt.isTouch&&(this.el.addEventListener("pointerenter",kt.pointerenter),this.el.addEventListener("pointerleave",kt.pointerleave)))},t.prototype.disable=function(e){e===void 0&&(e=!1),this.disabled!==!0&&(a.prototype.disable.call(this),this.el.classList.remove("ui-droppable"),e||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),kt.isTouch&&(this.el.removeEventListener("pointerenter",kt.pointerenter),this.el.removeEventListener("pointerleave",kt.pointerleave)))},t.prototype.destroy=function(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),a.prototype.destroy.call(this)},t.prototype.updateOption=function(e){var r=this;return Object.keys(e).forEach(function(n){return r.option[n]=e[n]}),this._setupAccept(),this},t.prototype._mouseEnter=function(e){if(K.DDManager.dragElement&&this._canDrop(K.DDManager.dragElement.el)){e.preventDefault(),e.stopPropagation(),K.DDManager.dropElement&&K.DDManager.dropElement!==this&&K.DDManager.dropElement._mouseLeave(e,!0),K.DDManager.dropElement=this;var r=oe.Utils.initEvent(e,{target:this.el,type:"dropover"});this.option.over&&this.option.over(r,this._ui(K.DDManager.dragElement)),this.triggerEvent("dropover",r),this.el.classList.add("ui-droppable-over")}},t.prototype._mouseLeave=function(e,r){var n;if(r===void 0&&(r=!1),!(!K.DDManager.dragElement||K.DDManager.dropElement!==this)){e.preventDefault(),e.stopPropagation();var o=oe.Utils.initEvent(e,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(o,this._ui(K.DDManager.dragElement)),this.triggerEvent("dropout",o),K.DDManager.dropElement===this&&(delete K.DDManager.dropElement,!r)){for(var u=void 0,c=this.el.parentElement;!u&&c;)u=(n=c.ddElement)===null||n===void 0?void 0:n.ddDroppable,c=c.parentElement;u&&u._mouseEnter(e)}}},t.prototype.drop=function(e){e.preventDefault();var r=oe.Utils.initEvent(e,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(r,this._ui(K.DDManager.dragElement)),this.triggerEvent("drop",r)},t.prototype._canDrop=function(e){return e&&(!this.accept||this.accept(e))},t.prototype._setupAccept=function(){var e=this;return this.option.accept?(typeof this.option.accept=="string"?this.accept=function(r){return r.classList.contains(e.option.accept)||r.matches(e.option.accept)}:this.accept=this.option.accept,this):this},t.prototype._ui=function(e){return he({draggable:e.el},e.ui())},t}(gi.DDBaseImplement);te.DDDroppable=vi;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.DDElement=void 0;var mi=Kt,_i=Zt,yi=te,bi=function(){function a(t){this.el=t}return a.init=function(t){return t.ddElement||(t.ddElement=new a(t)),t.ddElement},a.prototype.on=function(t,e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(t)>-1?this.ddDraggable.on(t,e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(t)>-1?this.ddDroppable.on(t,e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(t)>-1&&this.ddResizable.on(t,e),this},a.prototype.off=function(t){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(t)>-1?this.ddDraggable.off(t):this.ddDroppable&&["drop","dropover","dropout"].indexOf(t)>-1?this.ddDroppable.off(t):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(t)>-1&&this.ddResizable.off(t),this},a.prototype.setupDraggable=function(t){return this.ddDraggable?this.ddDraggable.updateOption(t):this.ddDraggable=new _i.DDDraggable(this.el,t),this},a.prototype.cleanDraggable=function(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this},a.prototype.setupResizable=function(t){return this.ddResizable?this.ddResizable.updateOption(t):this.ddResizable=new mi.DDResizable(this.el,t),this},a.prototype.cleanResizable=function(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this},a.prototype.setupDroppable=function(t){return this.ddDroppable?this.ddDroppable.updateOption(t):this.ddDroppable=new yi.DDDroppable(this.el,t),this},a.prototype.cleanDroppable=function(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this},a}();Jt.DDElement=bi;var _t=L&&L.__assign||function(){return _t=Object.assign||function(a){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},_t.apply(this,arguments)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.DDGridStack=void 0;var wi=$,Xt=dt,Ei=Jt,xi=function(){function a(){}return a.prototype.resizable=function(t,e,r,n){return this._getDDElements(t).forEach(function(o){var u;if(e==="disable"||e==="enable")o.ddResizable&&o.ddResizable[e]();else if(e==="destroy")o.ddResizable&&o.cleanResizable();else if(e==="option")o.setupResizable((u={},u[r]=n,u));else{var c=o.el.gridstackNode,v=c.grid,x=o.el.getAttribute("gs-resize-handles")||v.opts.resizable.handles||"e,s,se";x==="all"&&(x="n,e,s,w,se,sw,ne,nw");var C=!v.opts.alwaysShowResizeHandle;o.setupResizable(_t(_t(_t({},v.opts.resizable),{handles:x,autoHide:C}),{start:e.start,stop:e.stop,resize:e.resize}))}}),this},a.prototype.draggable=function(t,e,r,n){return this._getDDElements(t).forEach(function(o){var u;if(e==="disable"||e==="enable")o.ddDraggable&&o.ddDraggable[e]();else if(e==="destroy")o.ddDraggable&&o.cleanDraggable();else if(e==="option")o.setupDraggable((u={},u[r]=n,u));else{var c=o.el.gridstackNode.grid;o.setupDraggable(_t(_t({},c.opts.draggable),{start:e.start,stop:e.stop,drag:e.drag}))}}),this},a.prototype.dragIn=function(t,e){return this._getDDElements(t).forEach(function(r){return r.setupDraggable(e)}),this},a.prototype.droppable=function(t,e,r,n){return typeof e.accept=="function"&&!e._accept&&(e._accept=e.accept,e.accept=function(o){return e._accept(o)}),this._getDDElements(t).forEach(function(o){var u;e==="disable"||e==="enable"?o.ddDroppable&&o.ddDroppable[e]():e==="destroy"?o.ddDroppable&&o.cleanDroppable():e==="option"?o.setupDroppable((u={},u[r]=n,u)):o.setupDroppable(e)}),this},a.prototype.isDroppable=function(t){return!!(t&&t.ddElement&&t.ddElement.ddDroppable&&!t.ddElement.ddDroppable.disabled)},a.prototype.isDraggable=function(t){return!!(t&&t.ddElement&&t.ddElement.ddDraggable&&!t.ddElement.ddDraggable.disabled)},a.prototype.isResizable=function(t){return!!(t&&t.ddElement&&t.ddElement.ddResizable&&!t.ddElement.ddResizable.disabled)},a.prototype.on=function(t,e,r){return this._getDDElements(t).forEach(function(n){return n.on(e,function(o){r(o,Xt.DDManager.dragElement?Xt.DDManager.dragElement.el:o.target,Xt.DDManager.dragElement?Xt.DDManager.dragElement.helper:null)})}),this},a.prototype.off=function(t,e){return this._getDDElements(t).forEach(function(r){return r.off(e)}),this},a.prototype._getDDElements=function(t,e){e===void 0&&(e=!0);var r=wi.Utils.getElements(t);if(!r.length)return[];var n=r.map(function(o){return o.ddElement||(e?Ei.DDElement.init(o):null)});return e||n.filter(function(o){return o}),n},a}();Bt.DDGridStack=xi;(function(a){var t=L&&L.__assign||function(){return t=Object.assign||function(h){for(var i,s=1,l=arguments.length;s<l;s++){i=arguments[s];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(h[d]=i[d])}return h},t.apply(this,arguments)},e=L&&L.__createBinding||(Object.create?function(h,i,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(i,s);(!d||("get"in d?!i.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(h,l,d)}:function(h,i,s,l){l===void 0&&(l=s),h[l]=i[s]}),r=L&&L.__exportStar||function(h,i){for(var s in h)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,h,s)},n=L&&L.__spreadArray||function(h,i,s){if(s||arguments.length===2)for(var l=0,d=i.length,p;l<d;l++)(p||!(l in i))&&(p||(p=Array.prototype.slice.call(i,0,l)),p[l]=i[l]);return h.concat(p||Array.prototype.slice.call(i))};Object.defineProperty(a,"__esModule",{value:!0}),a.GridStack=void 0;/*!
 * GridStack 10.2.0
 * https://gridstackjs.com/
 *
 * Copyright (c) 2021-2022 Alain Dumesny
 * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE
 */var o=It,u=$,c=wt,v=Bt,x=j,C=dt,w=new v.DDGridStack;r(wt,a),r($,a),r(It,a),r(Bt,a),a.GridStack=function(){function h(i,s){s===void 0&&(s={});var l=this,d,p,f,m;this.el=i,this.opts=s,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},i.gridstack=this,s=s||{},i.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),s.row&&(s.minRow=s.maxRow=s.row,delete s.row);var g=u.Utils.toNumber(i.getAttribute("gs-row"));s.column==="auto"&&delete s.column,s.alwaysShowResizeHandle!==void 0&&(s._alwaysShowResizeHandle=s.alwaysShowResizeHandle);var y=(d=s.columnOpts)===null||d===void 0?void 0:d.breakpoints,E=s;if(E.oneColumnModeDomSort&&(delete E.oneColumnModeDomSort,console.log("warning: Gridstack oneColumnModeDomSort no longer supported. Use GridStackOptions.columnOpts instead.")),E.oneColumnSize||E.disableOneColumnMode===!1){var _=E.oneColumnSize||768;delete E.oneColumnSize,delete E.disableOneColumnMode,s.columnOpts=s.columnOpts||{},y=s.columnOpts.breakpoints=s.columnOpts.breakpoints||[];var S=y.find(function(U){return U.c===1});S?S.w=_:(S={c:1,w:_},y.push(S,{c:12,w:_+1}))}var b=s.columnOpts;b&&(!b.columnWidth&&!(!((p=b.breakpoints)===null||p===void 0)&&p.length)?(delete s.columnOpts,y=void 0):b.columnMax=b.columnMax||12),(y==null?void 0:y.length)>1&&y.sort(function(U,Q){return(Q.w||0)-(U.w||0)});var D=t(t({},u.Utils.cloneDeep(c.gridDefaults)),{column:u.Utils.toNumber(i.getAttribute("gs-column"))||c.gridDefaults.column,minRow:g||u.Utils.toNumber(i.getAttribute("gs-min-row"))||c.gridDefaults.minRow,maxRow:g||u.Utils.toNumber(i.getAttribute("gs-max-row"))||c.gridDefaults.maxRow,staticGrid:u.Utils.toBool(i.getAttribute("gs-static"))||c.gridDefaults.staticGrid,draggable:{handle:(s.handleClass?"."+s.handleClass:s.handle?s.handle:"")||c.gridDefaults.draggable.handle},removableOptions:{accept:s.itemClass||c.gridDefaults.removableOptions.accept,decline:c.gridDefaults.removableOptions.decline}});i.getAttribute("gs-animate")&&(D.animate=u.Utils.toBool(i.getAttribute("gs-animate"))),s=u.Utils.defaults(s,D),this._initMargin(),this.checkDynamicColumn(),this.el.classList.add("gs-"+s.column),s.rtl==="auto"&&(s.rtl=i.style.direction==="rtl"),s.rtl&&this.el.classList.add("grid-stack-rtl");var R=(f=this.el.parentElement)===null||f===void 0?void 0:f.parentElement,O=R!=null&&R.classList.contains(c.gridDefaults.itemClass)?R.gridstackNode:void 0;O&&(O.subGrid=this,this.parentGridItem=O,this.el.classList.add("grid-stack-nested"),O.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=s.cellHeight==="auto",this._isAutoCellHeight||s.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof s.cellHeight=="number"&&s.cellHeightUnit&&s.cellHeightUnit!==c.gridDefaults.cellHeightUnit&&(s.cellHeight=s.cellHeight+s.cellHeightUnit,delete s.cellHeightUnit),this.cellHeight(s.cellHeight,!1)),s.alwaysShowResizeHandle==="mobile"&&(s.alwaysShowResizeHandle=x.isTouch),this._styleSheetClass="gs-id-"+o.GridStackEngine._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();var A=s.engineClass||h.engineClass||o.GridStackEngine;if(this.engine=new A({column:this.getColumn(),float:s.float,maxRow:s.maxRow,onChange:function(U){var Q=0;l.engine.nodes.forEach(function(Z){Q=Math.max(Q,Z.y+Z.h)}),U.forEach(function(Z){var st=Z.el;st&&(Z._removeDOM?(st&&st.remove(),delete Z._removeDOM):l._writePosAttr(st,Z))}),l._updateStyles(!1,Q)}}),this._updateStyles(!1,0),s.auto&&(this.batchUpdate(),this.getGridItems().forEach(function(U){return l._prepareElement(U)}),this.batchUpdate(!1)),s.children){var nt=s.children;delete s.children,nt.length&&this.load(nt)}this.setAnimation(),s.subGridDynamic&&!C.DDManager.pauseDrag&&(C.DDManager.pauseDrag=!0),((m=s.draggable)===null||m===void 0?void 0:m.pause)!==void 0&&(C.DDManager.pauseDrag=s.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}return h.init=function(i,s){if(i===void 0&&(i={}),s===void 0&&(s=".grid-stack"),typeof document>"u")return null;var l=h.getGridElement(s);return l?(l.gridstack||(l.gridstack=new h(l,u.Utils.cloneDeep(i))),l.gridstack):(console.error(typeof s=="string"?'GridStack.initAll() no grid was found with selector "'+s+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)},h.initAll=function(i,s){i===void 0&&(i={}),s===void 0&&(s=".grid-stack");var l=[];return typeof document>"u"||(h.getGridElements(s).forEach(function(d){d.gridstack||(d.gridstack=new h(d,u.Utils.cloneDeep(i))),l.push(d.gridstack)}),l.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+s+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),l},h.addGrid=function(i,s){if(s===void 0&&(s={}),!i)return null;var l=i;if(l.gridstack){var d=l.gridstack;return s&&(d.opts=t(t({},d.opts),s)),s.children!==void 0&&d.load(s.children),d}var p=i.classList.contains("grid-stack");if(!p||h.addRemoveCB)if(h.addRemoveCB)l=h.addRemoveCB(i,s,!0,!0);else{var f=document.implementation.createHTMLDocument("");f.body.innerHTML='<div class="grid-stack '.concat(s.class||"",'"></div>'),l=f.body.children[0],i.appendChild(l)}var m=h.init(s,l);return m},h.registerEngine=function(i){h.engineClass=i},Object.defineProperty(h.prototype,"placeholder",{get:function(){if(!this._placeholder){var i=document.createElement("div");i.className="placeholder-content",this.opts.placeholderText&&(i.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,c.gridDefaults.itemClass,this.opts.itemClass),this.placeholder.appendChild(i)}return this._placeholder},enumerable:!1,configurable:!0}),h.prototype.addWidget=function(i,s){function l(y){return y.el!==void 0||y.x!==void 0||y.y!==void 0||y.w!==void 0||y.h!==void 0||y.content!==void 0}var d,p;if(typeof i=="string"){var f=document.implementation.createHTMLDocument("");f.body.innerHTML=i,d=f.body.children[0]}else if(arguments.length===0||arguments.length===1&&l(i))if(p=s=i,p!=null&&p.el)d=p.el;else if(h.addRemoveCB)d=h.addRemoveCB(this.el,s,!0,!1);else{var m=(s==null?void 0:s.content)||"",f=document.implementation.createHTMLDocument("");f.body.innerHTML='<div class="grid-stack-item '.concat(this.opts.itemClass||"",'"><div class="grid-stack-item-content">').concat(m,"</div></div>"),d=f.body.children[0]}else d=i;if(d){if(p=d.gridstackNode,p&&d.parentElement===this.el&&this.engine.nodes.find(function(y){return y._id===p._id}))return d;var g=this._readAttr(d);return s=u.Utils.cloneDeep(s)||{},u.Utils.defaults(s,g),p=this.engine.prepareNode(s),this._writeAttr(d,s),this._insertNotAppend?this.el.prepend(d):this.el.appendChild(d),this.makeWidget(d,s),d}},h.prototype.makeSubGrid=function(i,s,l,d){var p,f,m;d===void 0&&(d=!0);var g=i.gridstackNode;if(g||(g=this.makeWidget(i).gridstackNode),!((p=g.subGrid)===null||p===void 0)&&p.el)return g.subGrid;for(var y,E=this;E&&!y;)y=(f=E.opts)===null||f===void 0?void 0:f.subGridOpts,E=(m=E.parentGridItem)===null||m===void 0?void 0:m.grid;s=u.Utils.cloneDeep(t(t(t({},y||{}),{children:void 0}),s||g.subGridOpts||{})),g.subGridOpts=s;var _;s.column==="auto"&&(_=!0,s.column=Math.max(g.w||1,(l==null?void 0:l.w)||1),delete s.columnOpts);var S=g.el.querySelector(".grid-stack-item-content"),b,D;if(d){if(this._removeDD(g.el),D=t(t({},g),{x:0,y:0}),u.Utils.removeInternalForSave(D),delete D.subGridOpts,g.content&&(D.content=g.content,delete g.content),h.addRemoveCB)b=h.addRemoveCB(this.el,D,!0,!1);else{var R=document.implementation.createHTMLDocument("");R.body.innerHTML='<div class="grid-stack-item"></div>',b=R.body.children[0],b.appendChild(S),R.body.innerHTML='<div class="grid-stack-item-content"></div>',S=R.body.children[0],g.el.appendChild(S)}this._prepareDragDropByNode(g)}if(l){var O=_?s.column:g.w,A=g.h+l.h,nt=g.el.style;nt.transition="none",this.update(g.el,{w:O,h:A}),setTimeout(function(){return nt.transition=null})}var U=g.subGrid=h.addGrid(S,s);return l!=null&&l._moving&&(U._isTemp=!0),_&&(U._autoColumn=!0),d&&U.addWidget(b,D),l&&(l._moving?window.setTimeout(function(){return u.Utils.simulateMouseEvent(l._event,"mouseenter",U.el)},0):U.addWidget(g.el,g)),U},h.prototype.removeAsSubGrid=function(i){var s=this,l,d=(l=this.parentGridItem)===null||l===void 0?void 0:l.grid;d&&(d.batchUpdate(),d.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach(function(p){p.x+=s.parentGridItem.x,p.y+=s.parentGridItem.y,d.addWidget(p.el,p)}),d.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,i&&window.setTimeout(function(){return u.Utils.simulateMouseEvent(i._event,"mouseenter",d.el)},0))},h.prototype.save=function(i,s,l){i===void 0&&(i=!0),s===void 0&&(s=!1),l===void 0&&(l=h.saveCB);var d=this.engine.save(i,l);if(d.forEach(function(m){var g;if(i&&m.el&&!m.subGrid&&!l){var y=m.el.querySelector(".grid-stack-item-content");m.content=y?y.innerHTML:void 0,m.content||delete m.content}else if(!i&&!l&&delete m.content,!((g=m.subGrid)===null||g===void 0)&&g.el){var E=m.subGrid.save(i,s,l);m.subGridOpts=s?E:{children:E},delete m.subGrid}delete m.el}),s){var p=u.Utils.cloneDeep(this.opts);p.marginBottom===p.marginTop&&p.marginRight===p.marginLeft&&p.marginTop===p.marginRight&&(p.margin=p.marginTop,delete p.marginTop,delete p.marginRight,delete p.marginBottom,delete p.marginLeft),p.rtl===(this.el.style.direction==="rtl")&&(p.rtl="auto"),this._isAutoCellHeight&&(p.cellHeight="auto"),this._autoColumn&&(p.column="auto");var f=p._alwaysShowResizeHandle;return delete p._alwaysShowResizeHandle,f!==void 0?p.alwaysShowResizeHandle=f:delete p.alwaysShowResizeHandle,u.Utils.removeInternalAndSame(p,c.gridDefaults),p.children=d,p}return d},h.prototype.load=function(i,s){var l=this,d;s===void 0&&(s=h.addRemoveCB||!0),i=u.Utils.cloneDeep(i);var p=this.getColumn(),f=i.filter(function(b){return(b.x===void 0||b.y===void 0)&&!u.Utils.find(l.engine.nodes,b.id)});f.length&&f.length!==i.length?i=i.filter(function(b){return!u.Utils.find(f,b.id)}):f=[];var m=i.some(function(b){return b.x!==void 0||b.y!==void 0});m&&(i=u.Utils.sort(i,-1)),this._insertNotAppend=m,i.some(function(b){return(b.x||0)+(b.w||1)>p})&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(i,12,!0));var g=h.addRemoveCB;typeof s=="function"&&(h.addRemoveCB=s);var y=[];this.batchUpdate();var E=!this.engine.nodes.length;if(E&&this.setAnimation(!1),s){var _=n([],this.engine.nodes,!0);_.forEach(function(b){if(b.id){var D=u.Utils.find(i,b.id);D||(h.addRemoveCB&&h.addRemoveCB(l.el,b,!1,!1),y.push(b),l.removeWidget(b.el,!0,!1))}})}var S=[];return this.engine.nodes=this.engine.nodes.filter(function(b){return u.Utils.find(i,b.id)?(S.push(b),!1):!0}),i.forEach(function(b){var D,R=u.Utils.find(S,b.id);if(R){if(u.Utils.shouldSizeToContent(R)&&(b.h=R.h),l.engine.nodeBoundFix(b),(b.autoPosition||b.x===void 0||b.y===void 0)&&(b.w=b.w||R.w,b.h=b.h||R.h,l.engine.findEmptyPosition(b)),l.engine.nodes.push(R),u.Utils.samePos(R,b)&&l.moveNode(R,t(t({},b),{forceCollide:!0})),l.update(R.el,b),!((D=b.subGridOpts)===null||D===void 0)&&D.children){var O=R.el.querySelector(".grid-stack");O&&O.gridstack&&(O.gridstack.load(b.subGridOpts.children),l._insertNotAppend=!0)}}else s&&l.addWidget(b)}),s&&f.forEach(function(b){return l.addWidget(b)}),this.engine.removedNodes=y,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this._insertNotAppend,g?h.addRemoveCB=g:delete h.addRemoveCB,E&&(!((d=this.opts)===null||d===void 0)&&d.animate)&&this.setAnimation(this.opts.animate,!0),this},h.prototype.batchUpdate=function(i){return i===void 0&&(i=!0),this.engine.batchUpdate(i),i||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this},h.prototype.getCellHeight=function(i){if(i===void 0&&(i=!1),this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!i||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;var s=this.el.querySelector("."+this.opts.itemClass);if(s){var l=u.Utils.toNumber(s.getAttribute("gs-h"))||1;return Math.round(s.offsetHeight/l)}var d=parseInt(this.el.getAttribute("gs-current-row"));return d?Math.round(this.el.getBoundingClientRect().height/d):this.opts.cellHeight},h.prototype.cellHeight=function(i,s){if(s===void 0&&(s=!0),s&&i!==void 0&&this._isAutoCellHeight!==(i==="auto")&&(this._isAutoCellHeight=i==="auto",this._updateResizeEvent()),(i==="initial"||i==="auto")&&(i=void 0),i===void 0){var l=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;i=this.cellWidth()+l}var d=u.Utils.parseHeight(i);return this.opts.cellHeightUnit===d.unit&&this.opts.cellHeight===d.h?this:(this.opts.cellHeightUnit=d.unit,this.opts.cellHeight=d.h,this.resizeToContentCheck(),s&&this._updateStyles(!0),this)},h.prototype.cellWidth=function(){return this._widthOrContainer()/this.getColumn()},h.prototype._widthOrContainer=function(i){var s;return i===void 0&&(i=!1),i&&(!((s=this.opts.columnOpts)===null||s===void 0)&&s.breakpointForWindow)?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth},h.prototype.checkDynamicColumn=function(){var i,s,l=this.opts.columnOpts;if(!l||!l.columnWidth&&!(!((i=l.breakpoints)===null||i===void 0)&&i.length))return!1;var d=this.getColumn(),p=d,f=this._widthOrContainer(!0);if(l.columnWidth)p=Math.min(Math.round(f/l.columnWidth)||1,l.columnMax);else{p=l.columnMax;for(var m=0;m<l.breakpoints.length&&f<=l.breakpoints[m].w;)p=l.breakpoints[m++].c||d}if(p!==d){var g=(s=l.breakpoints)===null||s===void 0?void 0:s.find(function(y){return y.c===p});return this.column(p,(g==null?void 0:g.layout)||l.layout),!0}return!1},h.prototype.compact=function(i,s){return i===void 0&&(i="compact"),s===void 0&&(s=!0),this.engine.compact(i,s),this._triggerChangeEvent(),this},h.prototype.column=function(i,s){if(s===void 0&&(s="moveScale"),!i||i<1||this.opts.column===i)return this;var l=this.getColumn();return this.opts.column=i,this.engine?(this.engine.column=i,this.el.classList.remove("gs-"+l),this.el.classList.add("gs-"+i),this.engine.columnChanged(l,i,s),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):this},h.prototype.getColumn=function(){return this.opts.column},h.prototype.getGridItems=function(){var i=this;return Array.from(this.el.children).filter(function(s){return s.matches("."+i.opts.itemClass)&&!s.matches("."+i.opts.placeholderClass)})},h.prototype.destroy=function(i){if(i===void 0&&(i=!0),!!this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),i?this.el.parentNode.removeChild(this.el):(this.removeAll(i),this.el.classList.remove(this._styleSheetClass),this.el.removeAttribute("gs-current-row")),this._removeStylesheet(),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this},h.prototype.float=function(i){return this.opts.float!==i&&(this.opts.float=this.engine.float=i,this._triggerChangeEvent()),this},h.prototype.getFloat=function(){return this.engine.float},h.prototype.getCellFromPixel=function(i,s){s===void 0&&(s=!1);var l=this.el.getBoundingClientRect(),d;s?d={top:l.top+document.documentElement.scrollTop,left:l.left}:d={top:this.el.offsetTop,left:this.el.offsetLeft};var p=i.left-d.left,f=i.top-d.top,m=l.width/this.getColumn(),g=l.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(p/m),y:Math.floor(f/g)}},h.prototype.getRow=function(){return Math.max(this.engine.getRow(),this.opts.minRow)},h.prototype.isAreaEmpty=function(i,s,l,d){return this.engine.isAreaEmpty(i,s,l,d)},h.prototype.makeWidget=function(i,s){var l=h.getElement(i);this._prepareElement(l,!0,s);var d=l.gridstackNode;return this._updateContainerHeight(),d.subGridOpts&&this.makeSubGrid(l,d.subGridOpts,void 0,!1),this.opts.column===1&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,l},h.prototype.on=function(i,s){var l=this;if(i.indexOf(" ")!==-1){var d=i.split(" ");return d.forEach(function(f){return l.on(f,s)}),this}if(i==="change"||i==="added"||i==="removed"||i==="enable"||i==="disable"){var p=i==="enable"||i==="disable";p?this._gsEventHandler[i]=function(f){return s(f)}:this._gsEventHandler[i]=function(f){return s(f,f.detail)},this.el.addEventListener(i,this._gsEventHandler[i])}else i==="drag"||i==="dragstart"||i==="dragstop"||i==="resizestart"||i==="resize"||i==="resizestop"||i==="dropped"||i==="resizecontent"?this._gsEventHandler[i]=s:console.error("GridStack.on("+i+") event not supported");return this},h.prototype.off=function(i){var s=this;if(i.indexOf(" ")!==-1){var l=i.split(" ");return l.forEach(function(d){return s.off(d)}),this}return(i==="change"||i==="added"||i==="removed"||i==="enable"||i==="disable")&&this._gsEventHandler[i]&&this.el.removeEventListener(i,this._gsEventHandler[i]),delete this._gsEventHandler[i],this},h.prototype.offAll=function(){var i=this;return Object.keys(this._gsEventHandler).forEach(function(s){return i.off(s)}),this},h.prototype.removeWidget=function(i,s,l){var d=this;return s===void 0&&(s=!0),l===void 0&&(l=!0),h.getElements(i).forEach(function(p){if(!(p.parentElement&&p.parentElement!==d.el)){var f=p.gridstackNode;f||(f=d.engine.nodes.find(function(m){return p===m.el})),f&&(s&&h.addRemoveCB&&h.addRemoveCB(d.el,f,!1,!1),delete p.gridstackNode,d._removeDD(p),d.engine.removeNode(f,s,l),s&&p.parentElement&&p.remove())}}),l&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this},h.prototype.removeAll=function(i,s){var l=this;return i===void 0&&(i=!0),s===void 0&&(s=!0),this.engine.nodes.forEach(function(d){i&&h.addRemoveCB&&h.addRemoveCB(l.el,d,!1,!1),delete d.el.gridstackNode,l.opts.staticGrid||l._removeDD(d.el)}),this.engine.removeAll(i,s),s&&this._triggerRemoveEvent(),this},h.prototype.setAnimation=function(i,s){var l=this;return i===void 0&&(i=this.opts.animate),s?setTimeout(function(){l.opts&&l.setAnimation(i)}):i?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this},h.prototype.hasAnimationCSS=function(){return this.el.classList.contains("grid-stack-animate")},h.prototype.setStatic=function(i,s,l){var d=this;return s===void 0&&(s=!0),l===void 0&&(l=!0),!!this.opts.staticGrid===i?this:(i?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(function(p){d._prepareDragDropByNode(p),p.subGrid&&l&&p.subGrid.setStatic(i,s,l)}),s&&this._setStaticClass(),this)},h.prototype.update=function(i,s){var l=this;if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");var d=arguments,p=1;return s={x:d[p++],y:d[p++],w:d[p++],h:d[p++]},this.update(i,s)}return h.getElements(i).forEach(function(f){var m,g=f==null?void 0:f.gridstackNode;if(g){var y=u.Utils.cloneDeep(s);l.engine.nodeBoundFix(y),delete y.autoPosition,delete y.id;var E=["x","y","w","h"],_;if(E.some(function(A){return y[A]!==void 0&&y[A]!==g[A]})&&(_={},E.forEach(function(A){_[A]=y[A]!==void 0?y[A]:g[A],delete y[A]})),!_&&(y.minW||y.minH||y.maxW||y.maxH)&&(_={}),y.content!==void 0){var S=f.querySelector(".grid-stack-item-content");S&&S.innerHTML!==y.content&&(S.innerHTML=y.content,!((m=g.subGrid)===null||m===void 0)&&m.el&&(S.appendChild(g.subGrid.el),g.subGrid.opts.styleInHead||g.subGrid._updateStyles(!0))),delete y.content}var b=!1,D=!1;for(var R in y)R[0]!=="_"&&g[R]!==y[R]&&(g[R]=y[R],b=!0,D=D||!l.opts.staticGrid&&(R==="noResize"||R==="noMove"||R==="locked"));if(u.Utils.sanitizeMinMax(g),_){var O=_.w!==void 0&&_.w!==g.w;l.moveNode(g,_),l.resizeToContentCheck(O,g)}(_||b)&&l._writeAttr(f,g),D&&l._prepareDragDropByNode(g)}}),this},h.prototype.moveNode=function(i,s){var l=i._updating;l||this.engine.cleanNodes().beginUpdate(i),this.engine.moveNode(i,s),this._updateContainerHeight(),l||(this._triggerChangeEvent(),this.engine.endUpdate())},h.prototype.resizeToContent=function(i){if(i&&(i.classList.remove("size-to-content-max"),!!i.clientHeight)){var s=i.gridstackNode;if(s){var l=s.grid;if(!(!l||i.parentElement!==l.el)){var d=l.getCellHeight(!0);if(d){var p=s.h?s.h*d:i.clientHeight,f;if(s.resizeToContentParent&&(f=i.querySelector(s.resizeToContentParent)),f||(f=i.querySelector(h.resizeToContentParent)),!!f){var m=i.clientHeight-f.clientHeight,g=s.h?s.h*d-m:f.clientHeight,y;if(s.subGrid)y=s.subGrid.getRow()*s.subGrid.getCellHeight(!0);else{var E=f.firstElementChild;if(!E){console.error("Error: GridStack.resizeToContent() widget id:".concat(s.id," '").concat(h.resizeToContentParent,"'.firstElementChild is null, make sure to have a div like container. Skipping sizing."));return}y=E.getBoundingClientRect().height||g}if(g!==y){p+=y-g;var _=Math.ceil(p/d),S=Number.isInteger(s.sizeToContent)?s.sizeToContent:0;S&&_>S&&(_=S,i.classList.add("size-to-content-max")),s.minH&&_<s.minH?_=s.minH:s.maxH&&_>s.maxH&&(_=s.maxH),_!==s.h&&(l._ignoreLayoutsNodeChange=!0,l.moveNode(s,{h:_}),delete l._ignoreLayoutsNodeChange)}}}}}}},h.prototype.resizeToContentCBCheck=function(i){h.resizeToContentCB?h.resizeToContentCB(i):this.resizeToContent(i)},h.prototype.rotate=function(i,s){var l=this;return h.getElements(i).forEach(function(d){var p=d.gridstackNode;if(!(!p||p.w===p.h)){var f={w:p.h,h:p.w,minH:p.minW,minW:p.minH,maxH:p.maxW,maxW:p.maxH};if(s){var m=s.left>0?Math.floor(s.left/l.cellWidth()):0,g=s.top>0?Math.floor(s.top/l.opts.cellHeight):0;f.x=p.x+m-(p.h-(g+1)),f.y=p.y+g-m}l.update(d,f)}}),this},h.prototype.margin=function(i){var s=typeof i=="string"&&i.split(" ").length>1;if(!s){var l=u.Utils.parseHeight(i);if(this.opts.marginUnit===l.unit&&this.opts.margin===l.h)return}return this.opts.margin=i,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this},h.prototype.getMargin=function(){return this.opts.margin},h.prototype.willItFit=function(i){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");var s=arguments,l=0,d={x:s[l++],y:s[l++],w:s[l++],h:s[l++],autoPosition:s[l++]};return this.willItFit(d)}return this.engine.willItFit(i)},h.prototype._triggerChangeEvent=function(){if(this.engine.batchMode)return this;var i=this.engine.getDirtyNodes(!0);return i&&i.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(i),this._triggerEvent("change",i)),this.engine.saveInitial(),this},h.prototype._triggerAddEvent=function(){var i;if(this.engine.batchMode)return this;if(!((i=this.engine.addedNodes)===null||i===void 0)&&i.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(function(l){delete l._dirty});var s=n([],this.engine.addedNodes,!0);this.engine.addedNodes=[],this._triggerEvent("added",s)}return this},h.prototype._triggerRemoveEvent=function(){var i;if(this.engine.batchMode)return this;if(!((i=this.engine.removedNodes)===null||i===void 0)&&i.length){var s=n([],this.engine.removedNodes,!0);this.engine.removedNodes=[],this._triggerEvent("removed",s)}return this},h.prototype._triggerEvent=function(i,s){var l=s?new CustomEvent(i,{bubbles:!1,detail:s}):new Event(i);return this.el.dispatchEvent(l),this},h.prototype._removeStylesheet=function(){if(this._styles){var i=this.opts.styleInHead?void 0:this.el.parentNode;u.Utils.removeStylesheet(this._styleSheetClass,i),delete this._styles}return this},h.prototype._updateStyles=function(i,s){if(i===void 0&&(i=!1),i&&this._removeStylesheet(),s===void 0&&(s=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;var l=this.opts.cellHeight,d=this.opts.cellHeightUnit,p=".".concat(this._styleSheetClass," > .").concat(this.opts.itemClass);if(!this._styles){var f=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=u.Utils.createStylesheet(this._styleSheetClass,f,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,u.Utils.addCSSRule(this._styles,p,"height: ".concat(l).concat(d));var m=this.opts.marginTop+this.opts.marginUnit,g=this.opts.marginBottom+this.opts.marginUnit,y=this.opts.marginRight+this.opts.marginUnit,E=this.opts.marginLeft+this.opts.marginUnit,_="".concat(p," > .grid-stack-item-content"),S=".".concat(this._styleSheetClass," > .grid-stack-placeholder > .placeholder-content");u.Utils.addCSSRule(this._styles,_,"top: ".concat(m,"; right: ").concat(y,"; bottom: ").concat(g,"; left: ").concat(E,";")),u.Utils.addCSSRule(this._styles,S,"top: ".concat(m,"; right: ").concat(y,"; bottom: ").concat(g,"; left: ").concat(E,";")),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-n"),"top: ".concat(m,";")),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-s"),"bottom: ".concat(g)),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-ne"),"right: ".concat(y)),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-e"),"right: ".concat(y)),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-se"),"right: ".concat(y,"; bottom: ").concat(g)),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-nw"),"left: ".concat(E)),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-w"),"left: ".concat(E)),u.Utils.addCSSRule(this._styles,"".concat(p," > .ui-resizable-sw"),"left: ".concat(E,"; bottom: ").concat(g))}if(s=s||this._styles._max,s>this._styles._max){for(var b=function(R){return l*R+d},D=this._styles._max+1;D<=s;D++)u.Utils.addCSSRule(this._styles,"".concat(p,'[gs-y="').concat(D,'"]'),"top: ".concat(b(D))),u.Utils.addCSSRule(this._styles,"".concat(p,'[gs-h="').concat(D+1,'"]'),"height: ".concat(b(D+1)));this._styles._max=s}return this},h.prototype._updateContainerHeight=function(){if(!this.engine||this.engine.batchMode)return this;var i=this.parentGridItem,s=this.getRow()+this._extraDragRow,l=this.opts.cellHeight,d=this.opts.cellHeightUnit;if(!l)return this;if(!i){var p=u.Utils.parseHeight(getComputedStyle(this.el).minHeight);if(p.h>0&&p.unit===d){var f=Math.floor(p.h/l);s<f&&(s=f)}}return this.el.setAttribute("gs-current-row",String(s)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),s&&(this.el.style[i?"minHeight":"height"]=s*l+d),i&&!i.grid.engine.batchMode&&u.Utils.shouldSizeToContent(i)&&i.grid.resizeToContentCBCheck(i.el),this},h.prototype._prepareElement=function(i,s,l){s===void 0&&(s=!1),l=l||this._readAttr(i),i.gridstackNode=l,l.el=i,l.grid=this,l=this.engine.addNode(l,s),this._writeAttr(i,l),i.classList.add(c.gridDefaults.itemClass,this.opts.itemClass);var d=u.Utils.shouldSizeToContent(l);return d?i.classList.add("size-to-content"):i.classList.remove("size-to-content"),d&&this.resizeToContentCheck(!1,l),this._prepareDragDropByNode(l),this},h.prototype._writePosAttr=function(i,s){return s.x!==void 0&&s.x!==null&&i.setAttribute("gs-x",String(s.x)),s.y!==void 0&&s.y!==null&&i.setAttribute("gs-y",String(s.y)),s.w>1?i.setAttribute("gs-w",String(s.w)):i.removeAttribute("gs-w"),s.h>1?i.setAttribute("gs-h",String(s.h)):i.removeAttribute("gs-h"),this},h.prototype._writeAttr=function(i,s){if(!s)return this;this._writePosAttr(i,s);var l={autoPosition:"gs-auto-position",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(var d in l)s[d]?i.setAttribute(l[d],String(s[d])):i.removeAttribute(l[d]);return this},h.prototype._readAttr=function(i,s){s===void 0&&(s=!0);var l={};l.x=u.Utils.toNumber(i.getAttribute("gs-x")),l.y=u.Utils.toNumber(i.getAttribute("gs-y")),l.w=u.Utils.toNumber(i.getAttribute("gs-w")),l.h=u.Utils.toNumber(i.getAttribute("gs-h")),l.autoPosition=u.Utils.toBool(i.getAttribute("gs-auto-position")),l.noResize=u.Utils.toBool(i.getAttribute("gs-no-resize")),l.noMove=u.Utils.toBool(i.getAttribute("gs-no-move")),l.locked=u.Utils.toBool(i.getAttribute("gs-locked")),l.id=i.getAttribute("gs-id"),l.maxW=u.Utils.toNumber(i.getAttribute("gs-max-w")),l.minW=u.Utils.toNumber(i.getAttribute("gs-min-w")),l.maxH=u.Utils.toNumber(i.getAttribute("gs-max-h")),l.minH=u.Utils.toNumber(i.getAttribute("gs-min-h")),s&&(l.w===1&&i.removeAttribute("gs-w"),l.h===1&&i.removeAttribute("gs-h"),l.maxW&&i.removeAttribute("gs-max-w"),l.minW&&i.removeAttribute("gs-min-w"),l.maxH&&i.removeAttribute("gs-max-h"),l.minH&&i.removeAttribute("gs-min-h"));for(var d in l){if(!l.hasOwnProperty(d))return;!l[d]&&l[d]!==0&&delete l[d]}return l},h.prototype._setStaticClass=function(){var i,s,l=["grid-stack-static"];return this.opts.staticGrid?((i=this.el.classList).add.apply(i,l),this.el.setAttribute("gs-static","true")):((s=this.el.classList).remove.apply(s,l),this.el.removeAttribute("gs-static")),this},h.prototype.onResize=function(){var i;if(!((i=this.el)===null||i===void 0)&&i.clientWidth&&this.prevWidth!==this.el.clientWidth){this.prevWidth=this.el.clientWidth,this.batchUpdate();var s=!1;return this._autoColumn&&this.parentGridItem?this.opts.column!==this.parentGridItem.w&&(this.column(this.parentGridItem.w,"none"),s=!0):s=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(function(l){l.subGrid&&l.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(s),delete this._skipInitialResize,this.batchUpdate(!1),this}},h.prototype.resizeToContentCheck=function(i,s){var l=this;if(i===void 0&&(i=!1),s===void 0&&(s=void 0),!!this.engine){if(i&&this.hasAnimationCSS())return setTimeout(function(){return l.resizeToContentCheck(!1,s)},310);if(s)u.Utils.shouldSizeToContent(s)&&this.resizeToContentCBCheck(s.el);else if(this.engine.nodes.some(function(p){return u.Utils.shouldSizeToContent(p)})){var d=n([],this.engine.nodes,!0);this.batchUpdate(),d.forEach(function(p){u.Utils.shouldSizeToContent(p)&&l.resizeToContentCBCheck(p.el)}),this.batchUpdate(!1)}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,s?[s]:this.engine.nodes)}},h.prototype._updateResizeEvent=function(i){var s=this;i===void 0&&(i=!1);var l=!this.parentGridItem&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(function(d){return d.sizeToContent}));return!i&&l&&!this.resizeObserver?(this._sizeThrottle=u.Utils.throttle(function(){return s.onResize()},this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(function(){return s._sizeThrottle()}),this.resizeObserver.observe(this.el),this._skipInitialResize=!0):(i||!l)&&this.resizeObserver&&(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle),this},h.getElement=function(i){return i===void 0&&(i=".grid-stack-item"),u.Utils.getElement(i)},h.getElements=function(i){return i===void 0&&(i=".grid-stack-item"),u.Utils.getElements(i)},h.getGridElement=function(i){return h.getElement(i)},h.getGridElements=function(i){return u.Utils.getElements(i)},h.prototype._initMargin=function(){var i,s=0,l=[];return typeof this.opts.margin=="string"&&(l=this.opts.margin.split(" ")),l.length===2?(this.opts.marginTop=this.opts.marginBottom=l[0],this.opts.marginLeft=this.opts.marginRight=l[1]):l.length===4?(this.opts.marginTop=l[0],this.opts.marginRight=l[1],this.opts.marginBottom=l[2],this.opts.marginLeft=l[3]):(i=u.Utils.parseHeight(this.opts.margin),this.opts.marginUnit=i.unit,s=this.opts.margin=i.h),this.opts.marginTop===void 0?this.opts.marginTop=s:(i=u.Utils.parseHeight(this.opts.marginTop),this.opts.marginTop=i.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=s:(i=u.Utils.parseHeight(this.opts.marginBottom),this.opts.marginBottom=i.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=s:(i=u.Utils.parseHeight(this.opts.marginRight),this.opts.marginRight=i.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=s:(i=u.Utils.parseHeight(this.opts.marginLeft),this.opts.marginLeft=i.h,delete this.opts.margin),this.opts.marginUnit=i.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this},h.getDD=function(){return w},h.setupDragIn=function(i,s,l){l===void 0&&(l=document),(s==null?void 0:s.pause)!==void 0&&(C.DDManager.pauseDrag=s.pause),s=t(t({},c.dragInDefaultOptions),s||{});var d=typeof i=="string"?u.Utils.getElements(i,l):i;d.length&&(d==null||d.forEach(function(p){w.isDraggable(p)||w.dragIn(p,s)}))},h.prototype.movable=function(i,s){var l=this;return this.opts.staticGrid?this:(h.getElements(i).forEach(function(d){var p=d.gridstackNode;p&&(s?delete p.noMove:p.noMove=!0,l._prepareDragDropByNode(p))}),this)},h.prototype.resizable=function(i,s){var l=this;return this.opts.staticGrid?this:(h.getElements(i).forEach(function(d){var p=d.gridstackNode;p&&(s?delete p.noResize:p.noResize=!0,l._prepareDragDropByNode(p))}),this)},h.prototype.disable=function(i){if(i===void 0&&(i=!0),!this.opts.staticGrid)return this.enableMove(!1,i),this.enableResize(!1,i),this._triggerEvent("disable"),this},h.prototype.enable=function(i){if(i===void 0&&(i=!0),!this.opts.staticGrid)return this.enableMove(!0,i),this.enableResize(!0,i),this._triggerEvent("enable"),this},h.prototype.enableMove=function(i,s){var l=this;return s===void 0&&(s=!0),this.opts.staticGrid?this:(i?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(function(d){l._prepareDragDropByNode(d),d.subGrid&&s&&d.subGrid.enableMove(i,s)}),this)},h.prototype.enableResize=function(i,s){var l=this;return s===void 0&&(s=!0),this.opts.staticGrid?this:(i?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(function(d){l._prepareDragDropByNode(d),d.subGrid&&s&&d.subGrid.enableResize(i,s)}),this)},h.prototype._removeDD=function(i){return w.draggable(i,"destroy").resizable(i,"destroy"),i.gridstackNode&&delete i.gridstackNode._initDD,delete i.ddElement,this},h.prototype._setupAcceptWidget=function(){var i=this;if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return w.droppable(this.el,"destroy"),this;var s,l,d=function(p,f,m){var g,y,E=f.gridstackNode;if(E){if(m=m||f,!(!((y=E.grid)===null||y===void 0)&&y.el)){m.style.transform="scale(".concat(1/i.dragTransform.xScale,",").concat(1/i.dragTransform.yScale,")");var _=m.getBoundingClientRect();m.style.left=_.x+(i.dragTransform.xScale-1)*(p.clientX-_.x)/i.dragTransform.xScale+"px",m.style.top=_.y+(i.dragTransform.yScale-1)*(p.clientY-_.y)/i.dragTransform.yScale+"px",m.style.transformOrigin="0px 0px"}var S=i.el.getBoundingClientRect(),b=(g=m.getBoundingClientRect(),g.top),D=g.left;D-=S.left,b-=S.top;var R={position:{top:b*i.dragTransform.xScale,left:D*i.dragTransform.yScale}};if(E._temporaryRemoved){if(E.x=Math.max(0,Math.round(D/l)),E.y=Math.max(0,Math.round(b/s)),delete E.autoPosition,i.engine.nodeBoundFix(E),!i.engine.willItFit(E)){if(E.autoPosition=!0,!i.engine.willItFit(E)){w.off(f,"drag");return}E._willFitPos&&(u.Utils.copyPos(E,E._willFitPos),delete E._willFitPos)}i._onStartMoving(m,p,R,E,l,s)}else i._dragOrResize(m,p,R,E,l,s)}};return w.droppable(this.el,{accept:function(p){var f=p.gridstackNode||i._readAttr(p,!1);if((f==null?void 0:f.grid)===i)return!0;if(!i.opts.acceptWidgets)return!1;var m=!0;if(typeof i.opts.acceptWidgets=="function")m=i.opts.acceptWidgets(p);else{var g=i.opts.acceptWidgets===!0?".grid-stack-item":i.opts.acceptWidgets;m=p.matches(g)}if(m&&f&&i.opts.maxRow){var y={w:f.w,h:f.h,minW:f.minW,minH:f.minH};m=i.engine.willItFit(y)}return m}}).on(this.el,"dropover",function(p,f,m){var g=f.gridstackNode;if((g==null?void 0:g.grid)===i&&!g._temporaryRemoved)return!1;if(g!=null&&g.grid&&g.grid!==i&&!g._temporaryRemoved){var y=g.grid;y._leave(f,m)}l=i.cellWidth(),s=i.getCellHeight(!0),g||(g=i._readAttr(f,!1)),g.grid||(g._isExternal=!0,f.gridstackNode=g),m=m||f;var E=g.w||Math.round(m.offsetWidth/l)||1,_=g.h||Math.round(m.offsetHeight/s)||1;return g.grid&&g.grid!==i?(f._gridstackNodeOrig||(f._gridstackNodeOrig=g),f.gridstackNode=g=t(t({},g),{w:E,h:_,grid:i}),delete g.x,delete g.y,i.engine.cleanupNode(g).nodeBoundFix(g),g._initDD=g._isExternal=g._temporaryRemoved=!0):(g.w=E,g.h=_,g._temporaryRemoved=!0),h._itemRemoving(g.el,!1),w.on(f,"drag",d),d(p,f,m),!1}).on(this.el,"dropout",function(p,f,m){var g=f.gridstackNode;return g&&(!g.grid||g.grid===i)&&(i._leave(f,m),i._isTemp&&i.removeAsSubGrid(g)),!1}).on(this.el,"drop",function(p,f,m){var g,y,E,_=f.gridstackNode;if((_==null?void 0:_.grid)===i&&!_._isExternal)return!1;var S=!!i.placeholder.parentElement;i.placeholder.remove();var b=S&&i.opts.animate;b&&i.setAnimation(!1);var D=f._gridstackNodeOrig;if(delete f._gridstackNodeOrig,S&&(D!=null&&D.grid)&&D.grid!==i){var R=D.grid;R.engine.removeNodeFromLayoutCache(D),R.engine.removedNodes.push(D),R._triggerRemoveEvent()._triggerChangeEvent(),R.parentGridItem&&!R.engine.nodes.length&&R.opts.subGridDynamic&&R.removeAsSubGrid()}if(!_||(S&&(i.engine.cleanupNode(_),_.grid=i),(g=_.grid)===null||g===void 0||delete g._isTemp,w.off(f,"drag"),m!==f?(m.remove(),f.gridstackNode=D,S&&(f=f.cloneNode(!0))):(f.remove(),i._removeDD(f)),!S))return!1;f.gridstackNode=_,_.el=f;var O=(E=(y=_.subGrid)===null||y===void 0?void 0:y.el)===null||E===void 0?void 0:E.gridstack;return u.Utils.copyPos(_,i._readAttr(i.placeholder)),u.Utils.removePositioningStyles(f),i.el.appendChild(f),i._prepareElement(f,!0,_),O&&(O.parentGridItem=_,O.opts.styleInHead||O._updateStyles(!0)),i._updateContainerHeight(),i.engine.addedNodes.push(_),i._triggerAddEvent(),i._triggerChangeEvent(),i.engine.endUpdate(),i._gsEventHandler.dropped&&i._gsEventHandler.dropped(t(t({},p),{type:"dropped"}),D&&D.grid?D:void 0,_),b&&i.setAnimation(i.opts.animate,!0),!1}),this},h._itemRemoving=function(i,s){var l=i?i.gridstackNode:void 0;!(l!=null&&l.grid)||i.classList.contains(l.grid.opts.removableOptions.decline)||(s?l._isAboutToRemove=!0:delete l._isAboutToRemove,s?i.classList.add("grid-stack-item-removing"):i.classList.remove("grid-stack-item-removing"))},h.prototype._setupRemoveDrop=function(){if(typeof this.opts.removable!="string")return this;var i=document.querySelector(this.opts.removable);return i?(!this.opts.staticGrid&&!w.isDroppable(i)&&w.droppable(i,this.opts.removableOptions).on(i,"dropover",function(s,l){return h._itemRemoving(l,!0)}).on(i,"dropout",function(s,l){return h._itemRemoving(l,!1)}),this):this},h.prototype._prepareDragDropByNode=function(i){var s=this,l=i.el,d=i.noMove||this.opts.disableDrag,p=i.noResize||this.opts.disableResize;if(this.opts.staticGrid||d&&p)return i._initDD&&(this._removeDD(l),delete i._initDD),l.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!i._initDD){var f,m,g=function(_,S){s._gsEventHandler[_.type]&&s._gsEventHandler[_.type](_,_.target),f=s.cellWidth(),m=s.getCellHeight(!0),s._onStartMoving(l,_,S,i,f,m)},y=function(_,S){s._dragOrResize(l,_,S,i,f,m)},E=function(_){s.placeholder.remove(),delete i._moving,delete i._event,delete i._lastTried;var S=i.w!==i._orig.w,b=_.target;if(!(!b.gridstackNode||b.gridstackNode.grid!==s)){if(i.el=b,i._isAboutToRemove){var D=l.gridstackNode.grid;D._gsEventHandler[_.type]&&D._gsEventHandler[_.type](_,b),D.engine.nodes.push(i),D.removeWidget(l,!0,!0)}else u.Utils.removePositioningStyles(b),i._temporaryRemoved?(u.Utils.copyPos(i,i._orig),s._writePosAttr(b,i),s.engine.addNode(i)):s._writePosAttr(b,i),s._gsEventHandler[_.type]&&s._gsEventHandler[_.type](_,b);s._extraDragRow=0,s._updateContainerHeight(),s._triggerChangeEvent(),s.engine.endUpdate(),_.type==="resizestop"&&(Number.isInteger(i.sizeToContent)&&(i.sizeToContent=i.h),s.resizeToContentCheck(S,i))}};w.draggable(l,{start:g,stop:E,drag:y}).resizable(l,{start:g,stop:E,resize:y}),i._initDD=!0}return w.draggable(l,d?"disable":"enable").resizable(l,p?"disable":"enable"),this},h.prototype._onStartMoving=function(i,s,l,d,p,f){var m;if(this.engine.cleanNodes().beginUpdate(d),this._writePosAttr(this.placeholder,d),this.el.appendChild(this.placeholder),this.placeholder.gridstackNode=d,!((m=d.grid)===null||m===void 0)&&m.el)this.dragTransform=u.Utils.getValuesFromTransformedElement(i);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){var g=this.placeholder.closest(".grid-stack");this.dragTransform=u.Utils.getValuesFromTransformedElement(g)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};d.el=this.placeholder,d._lastUiPosition=l.position,d._prevYPix=l.position.top,d._moving=s.type==="dragstart",delete d._lastTried,s.type==="dropover"&&d._temporaryRemoved&&(this.engine.addNode(d),d._moving=!0),this.engine.cacheRects(p,f,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),s.type==="resizestart"&&(w.resizable(i,"option","minWidth",p*Math.min(d.minW||1,this.getColumn()-d.x)).resizable(i,"option","minHeight",f*Math.min(d.minH||1,(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-d.y)),d.maxW&&w.resizable(i,"option","maxWidth",p*d.maxW),d.maxH&&w.resizable(i,"option","maxHeight",f*d.maxH))},h.prototype._dragOrResize=function(i,s,l,d,p,f){var m=t({},d._orig),g,y=this.opts.marginLeft,E=this.opts.marginRight,_=this.opts.marginTop,S=this.opts.marginBottom,b=Math.round(f*.1),D=Math.round(p*.1);if(y=Math.min(y,D),E=Math.min(E,D),_=Math.min(_,b),S=Math.min(S,b),s.type==="drag"){if(d._temporaryRemoved)return;var R=l.position.top-d._prevYPix;d._prevYPix=l.position.top,this.opts.draggable.scroll!==!1&&u.Utils.updateScrollPosition(i,l.position,R);var O=l.position.left+(l.position.left>d._lastUiPosition.left?-E:y),A=l.position.top+(l.position.top>d._lastUiPosition.top?-S:_);m.x=Math.round(O/p),m.y=Math.round(A/f);var nt=this._extraDragRow;if(this.engine.collide(d,m)){var U=this.getRow(),Q=Math.max(0,m.y+d.h-U);this.opts.maxRow&&U+Q>this.opts.maxRow&&(Q=Math.max(0,this.opts.maxRow-U)),this._extraDragRow=Q}else this._extraDragRow=0;if(this._extraDragRow!==nt&&this._updateContainerHeight(),d.x===m.x&&d.y===m.y)return}else if(s.type==="resize"){if(m.x<0||(u.Utils.updateScrollResize(s,i,f),m.w=Math.round((l.size.width-y)/p),m.h=Math.round((l.size.height-_)/f),d.w===m.w&&d.h===m.h)||d._lastTried&&d._lastTried.w===m.w&&d._lastTried.h===m.h)return;var O=l.position.left+y,Z=l.position.top+_;m.x=Math.round(O/p),m.y=Math.round(Z/f),g=!0}d._event=s,d._lastTried=m;var st={x:l.position.left+y,y:l.position.top+_,w:(l.size?l.size.width:d.w*p)-y-E,h:(l.size?l.size.height:d.h*f)-_-S};if(this.engine.moveNodeCheck(d,t(t({},m),{cellWidth:p,cellHeight:f,rect:st,resizing:g}))){d._lastUiPosition=l.position,this.engine.cacheRects(p,f,_,E,S,y),delete d._skipDown,g&&d.subGrid&&d.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();var rt=s.target;this._writePosAttr(rt,d),this._gsEventHandler[s.type]&&this._gsEventHandler[s.type](s,rt)}},h.prototype._leave=function(i,s){var l=i.gridstackNode;l&&(s=s||i,s.style.transform="scale(1)",w.off(i,"drag"),!l._temporaryRemoved&&(l._temporaryRemoved=!0,this.engine.removeNode(l),l.el=l._isExternal&&s?s:i,this.opts.removable===!0&&h._itemRemoving(i,!0),i._gridstackNodeOrig?(i.gridstackNode=i._gridstackNodeOrig,delete i._gridstackNodeOrig):l._isExternal&&(delete l.el,delete i.gridstackNode,this.engine.restoreInitial())))},h.prototype.commit=function(){return(0,u.obsolete)(this,this.batchUpdate(!1),"commit","batchUpdate","5.2"),this},h.resizeToContentParent=".grid-stack-item-content",h.Utils=u.Utils,h.Engine=o.GridStackEngine,h.GDRev="10.2.0",h}()})(ue);const fe={TextBox:{text:"text",type:"h1"},CodeBlock:{language:"ts",code:"// code"},ImageBox:{url:"https://placedog.net/200/200"},CardBox:{title:"title",icon:"ic:coffee",body:"body",footer:"footer"},Avatar:{src:"https://placedog.net/512/512",width:"w-32",rounded:"rounded-full"}};function Di(a){let t,e;return{c(){t=z("div"),e=z("div"),this.h()},l(r){t=T(r,"DIV",{class:!0});var n=G(t);e=T(n,"DIV",{id:!0,class:!0}),G(e).forEach(H),n.forEach(H),this.h()},h(){M(e,"id","builder"),M(e,"class","grid-stack-item-content"),M(t,"class","overflow-auto h-72")},m(r,n){X(r,t,n),k(t,e),a[1](e)},p:it,i:it,o:it,d(r){r&&H(t),a[1](null)}}}function Ci(a,t,e){let r;Gt(a,ft,f=>e(4,r=f));let n,o;const u={acceptWidgets:!0,removable:"#trash",cellHeight:"2rem",cellHeightThrottle:500,animate:!1,subGridDynamic:!0,sizeToContent:!0};let c={};const v={acceptWidgets:!0,removable:"#trash",minRow:9,float:!0,cellHeight:"2rem",cellHeightThrottle:500,animate:!1,subGridOpts:u,subGridDynamic:!0,sizeToContent:!0},x=f=>{const m=f.grid.engine.nodes.filter(b=>b.y===f.y);if(!m)return;const g=f.grid.getColumn(),y=Array(g).fill(!1);m.forEach(b=>{for(let D=b.x;D<b.x+b.w;D++)y[D]=!0});let E=f.x;for(;E>0&&!y[E-1];)E--;let _=f.x+f.w;for(;_<g&&!y[_];)_++;return{newWidth:_-E,leftLimit:E,totalColumns:g,occupied:y}},C=f=>{const m=x(f);m&&f.grid.update(f.el,{w:m.newWidth,x:m.leftLimit,y:f.y})},w=f=>{const m=x(f);if(m)if(m.newWidth===f.w){const y=f.x,E=f.x+f.w,_=Math.round((y+E)/2)-2;console.log(_),f.grid.update(f.el,{w:2,x:_,y:f.y})}else f.grid.update(f.el,{w:m.newWidth,x:m.leftLimit,y:f.y})};function h(f){var E;const m={},g={},y=((E=f.subGridOpts)==null?void 0:E.children)||f.children||[];return y&&y.forEach(_=>{var b;const S=_.y||0;if(g[S]||(g[S]=[]),(b=_.subGridOpts)!=null&&b.children){const D=h(_.subGridOpts);g[S].push({...D,width:`w-${_.w||1}/12`})}else if(_.content){const D=r[_.id];D.width=`w-${_.w||1}/12`,g[S].push(D)}else console.warn("no content?",_)}),Object.keys(g).length!==0&&(m.rows=Object.keys(g).map(_=>({cols:g[_]}))),m}const i=f=>{var y,E;f.id||(f.id=Date.now().toString());const m={id:f.id,component:(y=f.el)==null?void 0:y.innerText,props:JSON.parse(JSON.stringify(fe[(E=f.el)==null?void 0:E.innerText])),posX:"middle",posY:"middle"},g=r[f.id];return g||(ft.update(_=>(_[f.id]=m,{..._})),m)},s=f=>{var E,_;let g=f.getGridItems().sort((S,b)=>S.gridstackNode.y-b.gridstackNode.y),y=0;for(let S=0;S<g.length;S++){let b=g[S],D=b.gridstackNode.y;if(S>0){let R=g[S-1],O=R.gridstackNode.y+R.gridstackNode.h;D>O&&(y+=D-O)}f.update(b,{y:D-y}),(E=b.gridstackNode)!=null&&E.subGrid&&s((_=b.gridstackNode)==null?void 0:_.subGrid)}},l=f=>{f&&(s(f),f.getGridItems().forEach(m=>{var g;C(m.gridstackNode),l((g=m.gridstackNode)==null?void 0:g.subGrid)}))},d=f=>{if(!f)return;l(f);const m=f.save(!0,!0);console.log("save",m),c=h(m),yt.set(c),console.log("customlayout",c)};Re(()=>{ue.GridStack.setupDragIn(".sidebar .grid-stack-item",{helper:"clone"}),o=ue.GridStack.init(v,n),o.on("dropped",function(f,m,g){var y,E;i(g),(y=g.el)==null||y.addEventListener("dblclick",_=>{w(g)}),(E=g.el)==null||E.addEventListener("click",_=>{le.set(g.id)})}),o.on("removed",function(f,m){le.set("")})}),mt.subscribe(()=>d(o)),ze.subscribe(()=>l(o));function p(f){ge[f?"unshift":"push"](()=>{n=f,e(0,n)})}return[n,p]}class Si extends xt{constructor(t){super(),Dt(this,t,Ci,Di,Et,{})}}function xe(a,t,e){const r=a.slice();return r[9]=t[e],r}function De(a){let t,e,r="Props",n,o,u,c="Layout",v,x,C,w="posX",h,i,s,l="left",d,p="middle",f,m="right",g,y,E,_,S="posY",b,D,R,O="top",A,nt="middle",U,Q="bottom",Z,st,rt,Ct,me="layoutClass",ee,at,Mt,ie,ht,St,_e="wrapperClass",re,lt,Nt,ne,ye,Rt=qt(a[2]),F=[];for(let P=0;P<Rt.length;P+=1)F[P]=Ce(xe(a,Rt,P));return{c(){t=z("div"),e=z("h6"),e.textContent=r,n=V();for(let P=0;P<F.length;P+=1)F[P].c();o=V(),u=z("h6"),u.textContent=c,v=V(),x=z("label"),C=z("span"),C.textContent=w,h=V(),i=z("select"),s=z("option"),s.textContent=l,d=z("option"),d.textContent=p,f=z("option"),f.textContent=m,y=V(),E=z("label"),_=z("span"),_.textContent=S,b=V(),D=z("select"),R=z("option"),R.textContent=O,A=z("option"),A.textContent=nt,U=z("option"),U.textContent=Q,st=V(),rt=z("label"),Ct=z("span"),Ct.textContent=me,ee=V(),at=z("input"),ie=V(),ht=z("label"),St=z("span"),St.textContent=_e,re=V(),lt=z("input"),this.h()},l(P){t=T(P,"DIV",{class:!0});var I=G(t);e=T(I,"H6",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-2gqzbt"&&(e.textContent=r),n=J(I);for(let se=0;se<F.length;se+=1)F[se].l(I);o=J(I),u=T(I,"H6",{class:!0,"data-svelte-h":!0}),q(u)!=="svelte-12d8e9l"&&(u.textContent=c),v=J(I),x=T(I,"LABEL",{class:!0});var B=G(x);C=T(B,"SPAN",{"data-svelte-h":!0}),q(C)!=="svelte-197tyuk"&&(C.textContent=w),h=J(B),i=T(B,"SELECT",{class:!0});var pt=G(i);s=T(pt,"OPTION",{"data-svelte-h":!0}),q(s)!=="svelte-dm3ioe"&&(s.textContent=l),d=T(pt,"OPTION",{"data-svelte-h":!0}),q(d)!=="svelte-13ynb9e"&&(d.textContent=p),f=T(pt,"OPTION",{"data-svelte-h":!0}),q(f)!=="svelte-gdc71y"&&(f.textContent=m),pt.forEach(H),B.forEach(H),y=J(I),E=T(I,"LABEL",{class:!0});var Wt=G(E);_=T(Wt,"SPAN",{"data-svelte-h":!0}),q(_)!=="svelte-1b5i2qv"&&(_.textContent=S),b=J(Wt),D=T(Wt,"SELECT",{class:!0});var jt=G(D);R=T(jt,"OPTION",{"data-svelte-h":!0}),q(R)!=="svelte-1urtez0"&&(R.textContent=O),A=T(jt,"OPTION",{"data-svelte-h":!0}),q(A)!=="svelte-13ynb9e"&&(A.textContent=nt),U=T(jt,"OPTION",{"data-svelte-h":!0}),q(U)!=="svelte-11kbr9q"&&(U.textContent=Q),jt.forEach(H),Wt.forEach(H),st=J(I),rt=T(I,"LABEL",{class:!0});var $t=G(rt);Ct=T($t,"SPAN",{"data-svelte-h":!0}),q(Ct)!=="svelte-wxfq74"&&(Ct.textContent=me),ee=J($t),at=T($t,"INPUT",{class:!0,type:!0}),$t.forEach(H),ie=J(I),ht=T(I,"LABEL",{class:!0});var Ft=G(ht);St=T(Ft,"SPAN",{"data-svelte-h":!0}),q(St)!=="svelte-1g444uz"&&(St.textContent=_e),re=J(Ft),lt=T(Ft,"INPUT",{class:!0,type:!0}),Ft.forEach(H),I.forEach(H),this.h()},h(){M(e,"class","h6"),M(u,"class","h6 mt-4"),s.__value="left",zt(s,s.__value),d.__value="middle",zt(d,d.__value),f.__value="right",zt(f,f.__value),M(i,"class","select"),M(x,"class","label"),R.__value="top",zt(R,R.__value),A.__value="middle",zt(A,A.__value),U.__value="bottom",zt(U,U.__value),M(D,"class","select"),M(E,"class","label"),M(at,"class","input pl-1"),M(at,"type","text"),at.value=Mt=a[1].layoutClass||"",M(rt,"class","label"),M(lt,"class","input pl-1"),M(lt,"type","text"),lt.value=Nt=a[1].wrapperClass||"",M(ht,"class","label"),M(t,"class","form-group")},m(P,I){X(P,t,I),k(t,e),k(t,n);for(let B=0;B<F.length;B+=1)F[B]&&F[B].m(t,null);k(t,o),k(t,u),k(t,v),k(t,x),k(x,C),k(x,h),k(x,i),k(i,s),k(i,d),k(i,f),Yt(i,a[1].posX||""),k(t,y),k(t,E),k(E,_),k(E,b),k(E,D),k(D,R),k(D,A),k(D,U),Yt(D,a[1].posY||""),k(t,st),k(t,rt),k(rt,Ct),k(rt,ee),k(rt,at),k(t,ie),k(t,ht),k(ht,St),k(ht,re),k(ht,lt),ne||(ye=[ut(i,"change",a[4]),ut(D,"change",a[5]),ut(at,"change",a[6]),ut(lt,"change",a[7])],ne=!0)},p(P,I){if(I&7){Rt=qt(P[2]);let B;for(B=0;B<Rt.length;B+=1){const pt=xe(P,Rt,B);F[B]?F[B].p(pt,I):(F[B]=Ce(pt),F[B].c(),F[B].m(t,o))}for(;B<F.length;B+=1)F[B].d(1);F.length=Rt.length}I&2&&g!==(g=P[1].posX||"")&&Yt(i,P[1].posX||""),I&2&&Z!==(Z=P[1].posY||"")&&Yt(D,P[1].posY||""),I&2&&Mt!==(Mt=P[1].layoutClass||"")&&at.value!==Mt&&(at.value=Mt),I&2&&Nt!==(Nt=P[1].wrapperClass||"")&&lt.value!==Nt&&(lt.value=Nt)},d(P){P&&H(t),Se(F,P),ne=!1,ke(ye)}}}function Ce(a){let t,e,r=a[9]+"",n,o,u,c,v,x;function C(...w){return a[3](a[9],...w)}return{c(){t=z("label"),e=z("span"),n=He(r),o=V(),u=z("input"),this.h()},l(w){t=T(w,"LABEL",{class:!0});var h=G(t);e=T(h,"SPAN",{});var i=G(e);n=Me(i,r),i.forEach(H),o=J(h),u=T(h,"INPUT",{class:!0,type:!0,placeholder:!0}),h.forEach(H),this.h()},h(){M(u,"class","input pl-1"),M(u,"type","text"),M(u,"placeholder","Input"),u.value=c=a[1].props[a[9]],M(t,"class","label")},m(w,h){X(w,t,h),k(t,e),k(e,n),k(t,o),k(t,u),v||(x=ut(u,"change",C),v=!0)},p(w,h){a=w,h&4&&r!==(r=a[9]+"")&&Ne(n,r),h&6&&c!==(c=a[1].props[a[9]])&&u.value!==c&&(u.value=c)},d(w){w&&H(t),v=!1,x()}}}function Ri(a){let t,e=a[2].length>0&&De(a);return{c(){t=z("div"),e&&e.c(),this.h()},l(r){t=T(r,"DIV",{class:!0});var n=G(t);e&&e.l(n),n.forEach(H),this.h()},h(){M(t,"class","overflow-auto h-72")},m(r,n){X(r,t,n),e&&e.m(t,null)},p(r,[n]){r[2].length>0?e?e.p(r,n):(e=De(r),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:it,o:it,d(r){r&&H(t),e&&e.d()}}}function zi(a,t,e){let r;Gt(a,ft,h=>e(8,r=h));let n,o,u=[];return le.subscribe(h=>{e(0,n=h),r[h]?(e(1,o=r[h]),e(2,u=Object.keys(o.props))):(e(1,o={}),e(2,u=[]))}),[n,o,u,(h,i)=>{ft.update(s=>(e(1,o.props[h]=i.target.value,o),s[n].props[h]=i.target.value,mt.update(l=>!l),{...s}))},h=>{ft.update(i=>(e(1,o.posX=h.target.value,o),i[n].posX=h.target.value,mt.update(s=>!s),{...i}))},h=>{ft.update(i=>(e(1,o.posY=h.target.value,o),i[n].posY=h.target.value,mt.update(s=>!s),{...i}))},h=>{ft.update(i=>(e(1,o.layoutClass=h.target.value,o),i[n].layoutClass=h.target.value,mt.update(s=>!s),{...i}))},h=>{ft.update(i=>(e(1,o.wrapperClass=h.target.value,o),i[n].wrapperClass=h.target.value,mt.update(s=>!s),{...i}))}]}class Ti extends xt{constructor(t){super(),Dt(this,t,zi,Ri,Et,{})}}function ki(a){let t,e="Export",r,n;return{c(){t=z("button"),t.textContent=e,this.h()},l(o){t=T(o,"BUTTON",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1kzjjzk"&&(t.textContent=e),this.h()},h(){M(t,"class","btn variant-filled-tertiary")},m(o,u){X(o,t,u),r||(n=ut(t,"click",a[1]),r=!0)},p:it,d(o){o&&H(t),r=!1,n()}}}function Hi(a){let t,e="Render",r,n;return{c(){t=z("button"),t.textContent=e,this.h()},l(o){t=T(o,"BUTTON",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-83liyz"&&(t.textContent=e),this.h()},h(){M(t,"class","btn variant-filled-secondary")},m(o,u){X(o,t,u),r||(n=ut(t,"click",a[3]),r=!0)},p:it,d(o){o&&H(t),r=!1,n()}}}function Mi(a){let t,e="Format",r,n;return{c(){t=z("button"),t.textContent=e,this.h()},l(o){t=T(o,"BUTTON",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1jrfyz6"&&(t.textContent=e),this.h()},h(){M(t,"class","btn variant-filled-primary")},m(o,u){X(o,t,u),r||(n=ut(t,"click",a[2]),r=!0)},p:it,d(o){o&&H(t),r=!1,n()}}}function Ni(a){let t;function e(o,u){if(o[0]==="format")return Mi;if(o[0]==="render")return Hi;if(o[0]==="export")return ki}let r=e(a),n=r&&r(a);return{c(){n&&n.c(),t=be()},l(o){n&&n.l(o),t=be()},m(o,u){n&&n.m(o,u),X(o,t,u)},p(o,[u]){r===(r=e(o))&&n?n.p(o,u):(n&&n.d(1),n=r&&r(o),n&&(n.c(),n.m(t.parentNode,t)))},i:it,o:it,d(o){o&&H(t),n&&n.d(o)}}}function Ui(a,t,e){let r;Gt(a,yt,v=>e(4,r=v));let{type:n=""}=t;const o=()=>{console.log(r),navigator.clipboard.writeText(JSON.stringify(r,null,2)).then(()=>{alert("Copied to your clipboard! Also in the console")})},u=()=>ze.update(v=>!v),c=()=>mt.update(v=>!v);return a.$$set=v=>{"type"in v&&e(0,n=v.type)},[n,o,u,c]}class Oi extends xt{constructor(t){super(),Dt(this,t,Ui,Ni,Et,{type:0})}}function Li(a){let t,e,r,n;return r=new $e({props:{class:"h-12 w-12 text-slate-300",icon:"mdi:trash-outline"}}),{c(){t=z("div"),e=z("div"),Ot(r.$$.fragment),this.h()},l(o){t=T(o,"DIV",{class:!0});var u=G(t);e=T(u,"DIV",{id:!0,class:!0});var c=G(e);Lt(r.$$.fragment,c),c.forEach(H),u.forEach(H),this.h()},h(){M(e,"id","trash"),M(e,"class","h-32 w-full bg-slate-400 border-2 border-slate-600 flex items-center justify-center absolute inset-0 z-10 opacity-75"),M(t,"class","relative h-32 w-full")},m(o,u){X(o,t,u),k(t,e),At(r,e,null),a[1](t),n=!0},p:it,i(o){n||(ct(r.$$.fragment,o),n=!0)},o(o){bt(r.$$.fragment,o),n=!1},d(o){o&&H(t),Pt(r),a[1](null)}}}function Ai(a,t,e){let r;function n(o){ge[o?"unshift":"push"](()=>{r=o,e(0,r)})}return[r,n]}class Pi extends xt{constructor(t){super(),Dt(this,t,Ai,Li,Et,{})}}function Ii(a){let t,e,r,n,o="init",u,c,v;return e=new ae({props:{layoutConfig:a[1],components:Le}}),{c(){t=z("div"),Ot(e.$$.fragment),r=V(),n=z("button"),n.textContent=o,this.h()},l(x){t=T(x,"DIV",{id:!0,class:!0});var C=G(t);Lt(e.$$.fragment,C),C.forEach(H),r=J(x),n=T(x,"BUTTON",{"data-svelte-h":!0}),q(n)!=="svelte-16ut5ff"&&(n.textContent=o),this.h()},h(){M(t,"id","preview"),M(t,"class","flexilte-row")},m(x,C){X(x,t,C),At(e,t,null),a[3](t),X(x,r,C),X(x,n,C),u=!0,c||(v=ut(n,"click",a[4]),c=!0)},p(x,[C]){const w={};C&2&&(w.layoutConfig=x[1]),e.$set(w)},i(x){u||(ct(e.$$.fragment,x),u=!0)},o(x){bt(e.$$.fragment,x),u=!1},d(x){x&&(H(t),H(r),H(n)),Pt(e),a[3](null),c=!1,v()}}}function ce(a){var e,r;let t={};if(a){if((e=a.classList)!=null&&e.contains("flexilte-row")){console.log(1,a);const n=Array.from(a.children).map(ce).filter(o=>o!==void 0);n.length>0&&(t.rows=n)}else if((r=a.classList)!=null&&r.contains("flexilte-col")){console.log(2,a);const n=Array.from(a.children).map(ce).filter(o=>o!==void 0);n.length>0&&(t.cols=n)}else if(a.id.startsWith("clone-"))console.log(3,a,a.id),t.component=a==null?void 0:a.innerText,t.props={};else{console.log(4,a);return}if(console.log(5,t),!(!t.rows&&!t.cols&&!t.component))return t}}function pe(a,t){if(Array.isArray(a)&&Array.isArray(t))return a.map((e,r)=>r<t.length?pe(e,t[r]):e).concat(t.slice(a.length));if(a instanceof Object&&t instanceof Object){for(const e in t)t[e]instanceof Object&&e in a?a[e]=pe(a[e],t[e]):a[e]=t[e];return a}else return t}function Bi(a,t,e){let r;Gt(a,yt,w=>e(1,r=w));let n;function o(w){if(w&&typeof w=="object")for(const h in w)w[h]&&typeof w[h]=="object"&&(w[h].component&&fe[w[h].component]&&(w[h].props=fe[w[h].component]),o(w[h]))}const u=w=>{console.log("add",w.item),w.item.innerText,yt.update(h=>{var s;const i=ce(n.children[0]);return i&&(console.log("parsed",JSON.parse(JSON.stringify(i))),console.log("b4",JSON.parse(JSON.stringify(h))),((s=h.rows)==null?void 0:s.length)===1&&h.rows[0].component==="AddBox"?h=i:h=pe(h,i),console.log("after",JSON.parse(JSON.stringify(h)))),o(h),v(n),h})},c=w=>{console.log("onRemove",w.item)};yt.subscribe(w=>console.log("config",w));const v=w=>{console.log("ee",w),(w.classList.contains("flexilte-row")||w.classList.contains("flexilte-col"))&&(Ae.create(w,{group:{name:"toolbox"},animation:150,onAdd:u,onRemove:c}),Array.from(w.children).forEach(h=>{v(h)}))};Re(()=>{console.log("init..."),yt.update(w=>(console.log("inited layout",w),{...w}))});function x(w){ge[w?"unshift":"push"](()=>{n=w,e(0,n)})}return[n,r,v,x,()=>v(n)]}class Gi extends xt{constructor(t){super(),Dt(this,t,Bi,Ii,Et,{})}}function Wi(a){let t,e,r,n,o,u;return e=new ae({props:{layoutConfig:a[0].component?a[0]:a[3],components:a[1]}}),o=new ae({props:{layoutConfig:a[2],components:a[1]}}),{c(){t=z("div"),Ot(e.$$.fragment),r=V(),n=z("div"),Ot(o.$$.fragment),this.h()},l(c){t=T(c,"DIV",{class:!0});var v=G(t);Lt(e.$$.fragment,v),v.forEach(H),r=J(c),n=T(c,"DIV",{class:!0});var x=G(n);Lt(o.$$.fragment,x),x.forEach(H),this.h()},h(){M(t,"class","container mx-auto mt-12 mb-[26rem]"),M(n,"class","fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4")},m(c,v){X(c,t,v),At(e,t,null),X(c,r,v),X(c,n,v),At(o,n,null),u=!0},p(c,[v]){const x={};v&1&&(x.layoutConfig=c[0].component?c[0]:c[3]),e.$set(x)},i(c){u||(ct(e.$$.fragment,c),ct(o.$$.fragment,c),u=!0)},o(c){bt(e.$$.fragment,c),bt(o.$$.fragment,c),u=!1},d(c){c&&(H(t),H(r),H(n)),Pt(e),Pt(o)}}}function ji(a,t,e){let r;return Gt(a,yt,c=>e(0,r=c)),[r,{ActionButton:Oi,TextBox:Ge,DNDList:Xe,DNDBuilder:Si,Inspector:Ti,ImageBox:Pe,RemoveBox:Pi,DNDPreview:Gi,AddBox:Ie,Avatar:We,CodeBlock:je},{rows:[{cols:[{width:"w-2/6",layoutClass:"variant-ghost p-4",rows:[{component:"TextBox",props:{type:"h4",text:"UI Components"}},{component:"DNDList",nodeClass:"flex-1"},{component:"RemoveBox"}]},{width:"w-5/6",layoutClass:"variant-ghost p-4",rows:[{alignHeight:!0,cols:[{posY:"middle",component:"TextBox",props:{type:"h4",text:"Builder"}},{width:"w-1/6",posX:"right",rows:[{cols:[{component:"ActionButton",props:{type:"format"},posX:"right"},{component:"ActionButton",props:{type:"render"},posX:"right"},{component:"ActionButton",props:{type:"export"},posX:"right"}]}]}]},{component:"DNDBuilder",nodeClass:"flex-1"}]},{width:"w-1/6",layoutClass:"variant-ghost p-4",rows:[{component:"TextBox",props:{type:"h4",text:"Inspector"}},{component:"Inspector",nodeClass:"flex-1"}]}]}]},{rows:[{cols:[{id:"1718176210843",component:"TextBox",props:{text:"Flexilte Editor",type:"h1"},posX:"middle",posY:"middle",width:"w-12/12"}]},{cols:[{id:"1718176285682",component:"TextBox",props:{text:"Try this awsome editor",type:"h5"},posX:"middle",posY:"middle",width:"w-12/12"}]},{cols:[{id:"1718176212709",component:"ImageBox",props:{url:"https://placedog.net/200/200"},posX:"middle",posY:"middle",width:"w-5/12"},{id:"1718176473646",component:"TextBox",props:{text:"Different Layout",type:"h2"},posX:"middle",posY:"middle",width:"w-7/12"}]}]}]}class Qi extends xt{constructor(t){super(),Dt(this,t,ji,Wi,Et,{})}}export{Qi as component};
